var isMobile = (navigator.userAgent.match(/iPhone/i)) || (navigator.userAgent.match(/iPod/i)) || (navigator.userAgent.match(/iPad/i)) || (navigator.userAgent.match(/Android/i)) || (navigator.userAgent.match(/Blackberry/i)) || (navigator.userAgent.match(/Windows Phone/i)) ? true : false;
var currentWidth = window.innerWidth || document.documentElement.clientWidth;


// Retina
var $retinaSupport = mytheme_urls.retinaSupport;
if($retinaSupport == 'enable') {
	
	jQuery.noConflict();
	!function(){function t(){}function e(t){return r.retinaImageSuffix+t}function i(t,i){if(this.path=t||"","undefined"!=typeof i&&null!==i)this.at_2x_path=i,this.perform_check=!1;else{if(void 0!==document.createElement){var n=document.createElement("a");n.href=this.path,n.pathname=n.pathname.replace(o,e),this.at_2x_path=n.href}else{var a=this.path.split("?");a[0]=a[0].replace(o,e),this.at_2x_path=a.join("?")}this.perform_check=!0}}function n(t){this.el=t,this.path=new i(this.el.getAttribute("src"),this.el.getAttribute("data-at2x"));var e=this;this.path.check_2x_variant(function(t){t&&e.swap()})}var a="undefined"==typeof exports?window:exports,r={retinaImageSuffix:"@2x",check_mime_type:!0,force_original_dimensions:!0};a.Retina=t,t.configure=function(t){null===t&&(t={});for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])},t.init=function(t){null===t&&(t=a);var e=t.onload||function(){};t.onload=function(){var t,i,a=document.getElementsByTagName("img"),r=[];for(t=0;t<a.length;t+=1)i=a[t],i.getAttributeNode("data-no-retina")||r.push(new n(i));e()}},t.isRetina=function(){var t="(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)";return a.devicePixelRatio>1?!0:a.matchMedia&&a.matchMedia(t).matches?!0:!1};var o=/\.\w+$/;a.RetinaImagePath=i,i.confirmed_paths=[],i.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))},i.prototype.check_2x_variant=function(t){var e,n=this;return this.is_external()?t(!1):this.perform_check||"undefined"==typeof this.at_2x_path||null===this.at_2x_path?this.at_2x_path in i.confirmed_paths?t(!0):(e=new XMLHttpRequest,e.open("HEAD",this.at_2x_path),e.onreadystatechange=function(){if(4!==e.readyState)return t(!1);if(e.status>=200&&e.status<=399){if(r.check_mime_type){var a=e.getResponseHeader("Content-Type");if(null===a||!a.match(/^image/i))return t(!1)}return i.confirmed_paths.push(n.at_2x_path),t(!0)}return t(!1)},e.send(),void 0):t(!0)},a.RetinaImage=n,n.prototype.swap=function(t){function e(){i.el.complete?(r.force_original_dimensions&&(i.el.setAttribute("width",i.el.offsetWidth),i.el.setAttribute("height",i.el.offsetHeight)),i.el.setAttribute("src",t)):setTimeout(e,5)}"undefined"==typeof t&&(t=this.path.at_2x_path);var i=this;e()},t.isRetina()&&t.init(a)}();

}


// Ui to top
jQuery.noConflict();
(function($){$.fn.UItoTop=function(options){var defaults={text:'To Top',min:200,inDelay:600,outDelay:400,containerID:'toTop',containerHoverID:'toTopHover',scrollSpeed:1200,easingType:'linear'},settings=$.extend(defaults,options),containerIDhash='#'+settings.containerID,containerHoverIDHash='#'+settings.containerHoverID;$('body').append('<a href="#" id="'+settings.containerID+'">'+settings.text+'</a>');$(containerIDhash).hide().on('click.UItoTop',function(){$('html, body').animate({scrollTop:0},settings.scrollSpeed,settings.easingType);$('#'+settings.containerHoverID,this).stop().animate({'opacity':0},settings.inDelay,settings.easingType);return false;}).prepend('<span id="'+settings.containerHoverID+'"></span>').hover(function(){$(containerHoverIDHash,this).stop().animate({'opacity':1},600,'linear');},function(){$(containerHoverIDHash,this).stop().animate({'opacity':0},700,'linear');});$(window).scroll(function(){var sd=$(window).scrollTop();if(typeof document.body.style.maxHeight==="undefined"){$(containerIDhash).css({'position':'absolute','top':sd+$(window).height()-50});}
if(sd>settings.min)
$(containerIDhash).fadeIn(settings.inDelay);else
$(containerIDhash).fadeOut(settings.Outdelay);});};})(jQuery);


// Easing Script
jQuery.noConflict();
jQuery.extend(jQuery.easing,{easeInQuad:function(n,t,e,u,a){return u*(t/=a)*t+e},easeOutQuad:function(n,t,e,u,a){return-u*(t/=a)*(t-2)+e},easeInOutQuad:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t+e:-u/2*(--t*(t-2)-1)+e},easeInCubic:function(n,t,e,u,a){return u*(t/=a)*t*t+e},easeOutCubic:function(n,t,e,u,a){return u*((t=t/a-1)*t*t+1)+e},easeInOutCubic:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t+e:u/2*((t-=2)*t*t+2)+e},easeInQuart:function(n,t,e,u,a){return u*(t/=a)*t*t*t+e},easeOutQuart:function(n,t,e,u,a){return-u*((t=t/a-1)*t*t*t-1)+e},easeInOutQuart:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t+e:-u/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(n,t,e,u,a){return u*(t/=a)*t*t*t*t+e},easeOutQuint:function(n,t,e,u,a){return u*((t=t/a-1)*t*t*t*t+1)+e},easeInOutQuint:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t*t+e:u/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(n,t,e,u,a){return-u*Math.cos(t/a*(Math.PI/2))+u+e},easeOutSine:function(n,t,e,u,a){return u*Math.sin(t/a*(Math.PI/2))+e},easeInOutSine:function(n,t,e,u,a){return-u/2*(Math.cos(Math.PI*t/a)-1)+e},easeInExpo:function(n,t,e,u,a){return 0==t?e:u*Math.pow(2,10*(t/a-1))+e},easeOutExpo:function(n,t,e,u,a){return t==a?e+u:u*(-Math.pow(2,-10*t/a)+1)+e},easeInOutExpo:function(n,t,e,u,a){return 0==t?e:t==a?e+u:(t/=a/2)<1?u/2*Math.pow(2,10*(t-1))+e:u/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(n,t,e,u,a){return-u*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOutCirc:function(n,t,e,u,a){return u*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOutCirc:function(n,t,e,u,a){return(t/=a/2)<1?-u/2*(Math.sqrt(1-t*t)-1)+e:u/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return-(s*Math.pow(2,10*(t-=1))*Math.sin((t*a-r)*(2*Math.PI)/i))+e},easeOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return s*Math.pow(2,-10*t)*Math.sin((t*a-r)*(2*Math.PI)/i)+u+e},easeInOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,s=u;if(0==t)return e;if(2==(t/=a/2))return e+u;if(i||(i=a*(.3*1.5)),s<Math.abs(u)){s=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/s);return 1>t?-.5*(s*Math.pow(2,10*(t-=1))*Math.sin((t*a-r)*(2*Math.PI)/i))+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*a-r)*(2*Math.PI)/i)*.5+u+e},easeInBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*(t/=a)*t*((r+1)*t-r)+e},easeOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*((t=t/a-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),(t/=a/2)<1?u/2*(t*t*(((r*=1.525)+1)*t-r))+e:u/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInBounce:function(n,t,e,u,a){return u-jQuery.easing.easeOutBounce(n,a-t,0,u,a)+e},easeOutBounce:function(n,t,e,u,a){return(t/=a)<1/2.75?u*(7.5625*t*t)+e:2/2.75>t?u*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?u*(7.5625*(t-=2.25/2.75)*t+.9375)+e:u*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(n,t,e,u,a){return a/2>t?.5*jQuery.easing.easeInBounce(n,2*t,0,u,a)+e:.5*jQuery.easing.easeOutBounce(n,2*t-a,0,u,a)+.5*u+e}});


// Smartresize
jQuery.noConflict();
!function(e){var r,i=e.event;i.special.smartresize={setup:function(){e(this).bind("resize",i.special.smartresize.handler)},teardown:function(){e(this).unbind("resize",i.special.smartresize.handler)},handler:function(e,i){var s=this,t=arguments;e.type="smartresize",r&&clearTimeout(r),r=setTimeout(function(){jQuery.event.handle.apply(s,t)},"execAsap"===i?0:100)}},e.fn.smartresize=function(e){return e?this.bind("smartresize",e):this.trigger("smartresize",["execAsap"])}}(jQuery);


// Pretty photo
jQuery.noConflict();
!function(e){function t(){var e=location.href;return hashtag=-1!==e.indexOf("#prettyPhoto")?decodeURI(e.substring(e.indexOf("#prettyPhoto")+1,e.length)):!1,hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function i(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function p(){-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto")}function o(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",p=new RegExp(i),o=p.exec(t);return null==o?"":o[1]}e.prettyPhoto={version:"3.1.6"},e.fn.prettyPhoto=function(a){function s(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(I/2-f.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:f.contentHeight,width:f.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:j/2-f.containerWidth/2<0?0:j/2-f.containerWidth/2,width:f.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(f.height).width(f.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==h(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(f.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide()),!settings.autoplay_slideshow||P||v||e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),v=!0}),m(),a.ajaxcallback()}function n(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function r(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function l(e,t){if(resized=!1,d(e,t),imageWidth=e,imageHeight=t,(k>j||b>I)&&doresize&&settings.allow_resize&&!$){for(resized=!0,fitting=!1;!fitting;)k>j?(imageWidth=j-200,imageHeight=t/e*imageWidth):b>I?(imageHeight=I-200,imageWidth=e/t*imageHeight):fitting=!0,b=imageHeight,k=imageWidth;(k>j||b>I)&&l(k,b),d(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(b),containerWidth:Math.floor(k)+2*settings.horizontal_padding,contentHeight:Math.floor(y),contentWidth:Math.floor(w),resized:resized}}function d(t,i){t=parseFloat(t),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),y=i+detailsHeight,w=t,b=y+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),k=t}function h(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function c(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=_(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=I/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>I)return;$pp_pic_holder.css({top:projectedTop,left:j/2+scroll_pos.scrollLeft-contentwidth/2})}}function _(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function g(){I=e(window).height(),j=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(j)}function m(){isSet&&settings.overlay_gallery&&"image"==h(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((f.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function u(t){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var i=0;i<pp_images.length;i++)pp_images[i].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[i]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),settings.allow_expand&&e("a.pp_expand").bind("click",function(t){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),n(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),c()}a=jQuery.extend({hook:"data-gal",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder"> 						<div class="ppt">&nbsp;</div> 						<div class="pp_top"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 						<div class="pp_content_container"> 							<div class="pp_left"> 							<div class="pp_right"> 								<div class="pp_content"> 									<div class="pp_loaderIcon"></div> 									<div class="pp_fade"> 										<a href="#" class="pp_expand" title="Expand the image">Expand</a> 										<div class="pp_hoverContainer"> 											<a class="pp_next" href="#">next</a> 											<a class="pp_previous" href="#">previous</a> 										</div> 										<div id="pp_full_res"></div> 										<div class="pp_details"> 											<div class="pp_nav"> 												<a href="#" class="pp_arrow_previous">Previous</a> 												<p class="currentTextHolder">0/0</p> 												<a href="#" class="pp_arrow_next">Next</a> 											</div> 											<p class="pp_description"></p> 											<div class="pp_social">{pp_social}</div> 											<a class="pp_close" href="#">Close</a> 										</div> 									</div> 								</div> 							</div> 							</div> 						</div> 						<div class="pp_bottom"> 							<div class="pp_left"></div> 							<div class="pp_middle"></div> 							<div class="pp_right"></div> 						</div> 					</div> 					<div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery"> 								<a href="#" class="pp_arrow_previous">Previous</a> 								<div> 									<ul> 										{gallery} 									</ul> 								</div> 								<a href="#" class="pp_arrow_next">Next</a> 							</div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&amp;layout=button_count&amp;show_faces=true&amp;width=500&amp;action=like&amp;font&amp;colorscheme=light&amp;height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},a);var f,v,y,w,b,k,P,x=this,$=!1,I=e(window).height(),j=e(window).width();return doresize=!0,scroll_pos=_(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){c(),g()}),a.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){return settings=a,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=e(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(x,function(t,i){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(x,function(t,i){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(x,function(t,i){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("title")?e(t).attr("title"):"":void 0}):e.makeArray(e(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a["+settings.hook+"^='"+theRel+"']").index(e(this)),u(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){c()}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return"undefined"==typeof settings&&(settings=a,pp_images=e.makeArray(arguments[0]),pp_titles=arguments[1]?e.makeArray(arguments[1]):e.makeArray(""),pp_descriptions=arguments[2]?e.makeArray(arguments[2]):e.makeArray(""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,u(t.target)),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),r(e(pp_images).size()),e(".pp_loaderIcon").show(),settings.deeplinking&&i(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(o("width",pp_images[set_position]))?o("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(o("height",pp_images[set_position]))?o("height",pp_images[set_position]):settings.default_height.toString(),$=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),$=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),$=!0),$pp_pic_holder.fadeIn(function(){switch(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;"),imgPreloader="",skipInjection=!1,h(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){f=l(imgPreloader.width,imgPreloader.height),s()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":f=l(movie_width,movie_height),movie_id=o("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,o("rel",pp_images[set_position])?movie+="?rel="+o("rel",pp_images[set_position]):movie+="?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":f=l(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,i=movie_id.match(t);movie="http://player.vimeo.com/video/"+i[3]+"?title=0&amp;byline=0&amp;portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=f.width+"/embed/?moog_width="+f.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,f.height).replace(/{path}/g,movie);break;case"quicktime":f=l(movie_width,movie_height),f.height+=15,f.contentHeight+=15,f.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":f=l(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":f=l(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,f=l(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s()});break;case"custom":f=l(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,f=l(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),n(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*(itemsPerPage*itemWidth),$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof P?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),P=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(P),P=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),p(),settings.callback(),doresize=!0,v=!1,delete settings}))},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){e("a["+a.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;


// Nice scroll
jQuery.noConflict();
!function(o){var e=!1,t=!1,r=5e3,i=2e3,n=function(){var o=document.getElementsByTagName("script"),o=o[o.length-1].src.split("?")[0];return o.split("/").length>0?o.split("/").slice(0,-1).join("/")+"/":""}(),s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||!1,l=window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||!1,c=!1,d=function(){if(c)return c;var o=document.createElement("DIV"),e={haspointerlock:"pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document};e.isopera="opera"in window,e.isopera12=e.isopera&&"getUserMedia"in navigator,e.isie="all"in document&&"attachEvent"in o&&!e.isopera,e.isieold=e.isie&&!("msInterpolationMode"in o.style),e.isie7=e.isie&&!e.isieold&&(!("documentMode"in document)||7==document.documentMode),e.isie8=e.isie&&"documentMode"in document&&8==document.documentMode,e.isie9=e.isie&&"performance"in window&&document.documentMode>=9,e.isie10=e.isie&&"performance"in window&&document.documentMode>=10,e.isie9mobile=/iemobile.9/i.test(navigator.userAgent),e.isie9mobile&&(e.isie9=!1),e.isie7mobile=!e.isie9mobile&&e.isie7&&/iemobile/i.test(navigator.userAgent),e.ismozilla="MozAppearance"in o.style,e.iswebkit="WebkitAppearance"in o.style,e.ischrome="chrome"in window,e.ischrome22=e.ischrome&&e.haspointerlock,e.cantouch="ontouchstart"in document.documentElement,e.hasmstouch=window.navigator.msPointerEnabled||!1,e.ismac=/^mac$/i.test(navigator.platform),e.isios=e.cantouch&&/iphone|ipad|ipod/i.test(navigator.platform),e.isios4=e.isios&&!("seal"in Object),e.isandroid=/android/i.test(navigator.userAgent),e.trstyle=!1,e.hastransform=!1,e.hastranslate3d=!1,e.transitionstyle=!1,e.hastransition=!1,e.transitionend=!1;for(var t=["transform","msTransform","webkitTransform","MozTransform","OTransform"],r=0;r<t.length;r++)if("undefined"!=typeof o.style[t[r]]){e.trstyle=t[r];break}e.hastransform=0!=e.trstyle,e.hastransform&&(o.style[e.trstyle]="translate3d(1px,2px,3px)",e.hastranslate3d=/translate3d/.test(o.style[e.trstyle])),e.transitionstyle=!1,e.prefixstyle="",e.transitionend=!1;for(var t="transition,webkitTransition,MozTransition,OTransition,OTransition,msTransition,KhtmlTransition".split(","),i=",-webkit-,-moz-,-o-,-o,-ms-,-khtml-".split(","),n="transitionend,webkitTransitionEnd,transitionend,otransitionend,oTransitionEnd,msTransitionEnd,KhtmlTransitionEnd".split(","),r=0;r<t.length;r++)if(t[r]in o.style){e.transitionstyle=t[r],e.prefixstyle=i[r],e.transitionend=n[r];break}e.hastransition=e.transitionstyle;o:{for(t=["-moz-grab","-webkit-grab","grab"],(e.ischrome&&!e.ischrome22||e.isie)&&(t=[]),r=0;r<t.length;r++)if(i=t[r],o.style.cursor=i,o.style.cursor==i){t=i;break o}t="url(http://www.google.com/intl/en_ALL/mapfiles/openhand.cur),n-resize"}return e.cursorgrabvalue=t,e.hasmousecapture="setCapture"in o,c=e},h=function(a,c){function h(o,e,t){return e=o.css(e),o=parseFloat(e),isNaN(o)?(o=v[e]||0,t=3==o?t?m.win.outerHeight()-m.win.innerHeight():m.win.outerWidth()-m.win.innerWidth():1,m.isie8&&o&&(o+=1),t?o:0):o}function p(o,e){var t=0,r=0;if("wheelDeltaY"in o)t=Math.floor(o.wheelDeltaX/2),r=Math.floor(o.wheelDeltaY/2);else{var i=o.detail?-1*o.detail:o.wheelDelta/40;i&&(e?t=Math.floor(i*m.opt.mousescrollstep):r=Math.floor(i*m.opt.mousescrollstep))}t&&(m.scrollmom&&m.scrollmom.stop(),m.lastdeltax+=t,m.synched("mousewheelx",function(){var o=m.lastdeltax;m.lastdeltax=0,m.rail.drag||m.doScrollLeftBy(o)})),r&&(m.scrollmom&&m.scrollmom.stop(),m.lastdeltay+=r,m.synched("mousewheely",function(){var o=m.lastdeltay;m.lastdeltay=0,m.rail.drag||m.doScrollBy(o)}))}var m=this;if(this.version="3.0.0",this.name="nicescroll",this.me=c,this.opt={doc:o("body"),win:!1,zindex:9e3,cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0},this.opt.snapbackspeed=80,a)for(var f in m.opt)"undefined"!=typeof a[f]&&(m.opt[f]=a[f]);this.iddoc=(this.doc=m.opt.doc)&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/BODY|HTML/.test(m.opt.win?m.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=m.opt.win!==!1,this.win=m.opt.win||(this.ispage?o(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?o(window):this.win,this.body=o("body"),this.iframe=this.isfixed=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=m.opt.autohidemode,this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.observer=this.scrollmom=this.scrollrunning=!1;do this.id="ascrail"+i++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.cursorfreezed=this.cursor=this.rail=!1,this.visibility=!0,this.hidden=this.locked=!1,this.cursoractive=!0,this.nativescrollingarea=!1,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltay=this.lastdeltax=0;var g=this.detected=d();if(this.ishwscroll=(this.canhwscroll=g.hastransform&&m.opt.hwacceleration)&&m.haswrapper,this.istouchcapable=!1,g.cantouch&&g.ischrome&&!g.isios&&!g.isandroid&&(this.istouchcapable=!0,g.cantouch=!1),g.cantouch&&g.ismozilla&&!g.isios&&(this.istouchcapable=!0,g.cantouch=!1),this.delayed=function(o,e,t,r){var i=m.delaylist[o],n=(new Date).getTime();return!r&&i&&i.tt?!1:(i&&i.tt&&clearTimeout(i.tt),void(i&&i.last+t>n&&!i.tt?m.delaylist[o]={last:n+t,tt:setTimeout(function(){m.delaylist[o].tt=0,e.call()},t)}:i&&i.tt||(m.delaylist[o]={last:n,tt:0},setTimeout(function(){e.call()},0))))},this.synched=function(o,e){return m.synclist[o]=e,function(){m.onsync||(s(function(){m.onsync=!1;for(o in m.synclist){var e=m.synclist[o];e&&e.call(m),m.synclist[o]=!1}}),m.onsync=!0)}(),o},this.unsynched=function(o){m.synclist[o]&&(m.synclist[o]=!1)},this.css=function(o,e){for(var t in e)m.saved.css.push([o,t,o.css(t)]),o.css(t,e[t])},this.scrollTop=function(o){return"undefined"==typeof o?m.getScrollTop():m.setScrollTop(o)},this.scrollLeft=function(o){return"undefined"==typeof o?m.getScrollLeft():m.setScrollLeft(o)},BezierClass=function(o,e,t,r,i,n,s){this.st=o,this.ed=e,this.spd=t,this.p1=r||0,this.p2=i||1,this.p3=n||0,this.p4=s||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st},BezierClass.prototype={B2:function(o){return 3*o*o*(1-o)},B3:function(o){return 3*o*(1-o)*(1-o)},B4:function(o){return(1-o)*(1-o)*(1-o)},getNow:function(){var o=1-((new Date).getTime()-this.ts)/this.spd,e=this.B2(o)+this.B3(o)+this.B4(o);return 0>o?this.ed:this.st+Math.round(this.df*e)},update:function(o,e){return this.st=this.getNow(),this.ed=o,this.spd=e,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},g.hastranslate3d&&g.isios&&this.doc.css("-webkit-backface-visibility","hidden");var w=function(){var o=m.doc.css(g.trstyle);return o&&"matrix"==o.substr(0,6)?o.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1};this.getScrollTop=function(o){if(!o){if(o=w())return 16==o.length?-o[13]:-o[5];if(m.timerscroll&&m.timerscroll.bz)return m.timerscroll.bz.getNow()}return m.doc.translate.y},this.getScrollLeft=function(o){if(!o){if(o=w())return 16==o.length?-o[12]:-o[4];if(m.timerscroll&&m.timerscroll.bh)return m.timerscroll.bh.getNow()}return m.doc.translate.x},this.notifyScrollEvent=document.createEvent?function(o){var e=document.createEvent("UIEvents");e.initUIEvent("scroll",!1,!0,window,1),o.dispatchEvent(e)}:document.fireEvent?function(o){var e=document.createEventObject();o.fireEvent("onscroll"),e.cancelBubble=!0}:function(){},g.hastranslate3d&&m.opt.enabletranslate3d?(this.setScrollTop=function(o,e){m.doc.translate.y=o,m.doc.translate.ty=-1*o+"px",m.doc.css(g.trstyle,"translate3d("+m.doc.translate.tx+","+m.doc.translate.ty+",0px)"),e||m.notifyScrollEvent(m.win[0])},this.setScrollLeft=function(o,e){m.doc.translate.x=o,m.doc.translate.tx=-1*o+"px",m.doc.css(g.trstyle,"translate3d("+m.doc.translate.tx+","+m.doc.translate.ty+",0px)"),e||m.notifyScrollEvent(m.win[0])}):(this.setScrollTop=function(o,e){m.doc.translate.y=o,m.doc.translate.ty=-1*o+"px",m.doc.css(g.trstyle,"translate("+m.doc.translate.tx+","+m.doc.translate.ty+")"),e||m.notifyScrollEvent(m.win[0])},this.setScrollLeft=function(o,e){m.doc.translate.x=o,m.doc.translate.tx=-1*o+"px",m.doc.css(g.trstyle,"translate("+m.doc.translate.tx+","+m.doc.translate.ty+")"),e||m.notifyScrollEvent(m.win[0])})}else this.getScrollTop=function(){return m.docscroll.scrollTop()},this.setScrollTop=function(o){return m.docscroll.scrollTop(o)},this.getScrollLeft=function(){return m.docscroll.scrollLeft()},this.setScrollLeft=function(o){return m.docscroll.scrollLeft(o)};this.getTarget=function(o){return o?o.target?o.target:o.srcElement?o.srcElement:!1:!1},this.hasParent=function(o,e){if(!o)return!1;for(var t=o.target||o.srcElement||o||!1;t&&t.id!=e;)t=t.parentNode||!1;return t!==!1};var v={thin:1,medium:3,thick:5};this.updateScrollBar=function(o){if(m.ishwscroll)m.rail.css({height:m.win.innerHeight()}),m.railh&&m.railh.css({width:m.win.innerWidth()});else{var e=m.isfixed?{top:parseFloat(m.win.css("top")),left:parseFloat(m.win.css("left"))}:m.win.offset(),t=e.top,r=e.left;t+=h(m.win,"border-top-width",!0),m.win.outerWidth(),m.win.innerWidth(),r+=m.rail.align?m.win.outerWidth()-h(m.win,"border-right-width")-m.rail.width:h(m.win,"border-left-width");var i=m.opt.railoffset;i&&(i.top&&(t+=i.top),m.rail.align&&i.left&&(r+=i.left)),m.locked||m.rail.css({top:t,left:r,height:o?o.h:m.win.innerHeight()}),m.zoom&&m.zoom.css({top:t+1,left:1==m.rail.align?r-20:r+m.rail.width+4}),m.railh&&!m.locked&&(t=e.top,r=e.left,o=m.railh.align?t+h(m.win,"border-top-width",!0)+m.win.innerHeight()-m.railh.height:t+h(m.win,"border-top-width",!0),r+=h(m.win,"border-left-width"),m.railh.css({top:o,left:r,width:m.railh.width}))}},this.doRailClick=function(o,e,t){var r;!(m.rail.drag&&1!=m.rail.drag.pt)&&!m.locked&&!m.rail.drag&&(m.cancelScroll(),m.cancelEvent(o),e?(e=t?m.doScrollLeft:m.doScrollTop,r=t?(o.pageX-m.railh.offset().left-m.cursorwidth/2)*m.scrollratio.x:(o.pageY-m.rail.offset().top-m.cursorheight/2)*m.scrollratio.y,e(r)):(e=t?m.doScrollLeftBy:m.doScrollBy,r=t?m.scroll.x:m.scroll.y,o=t?o.pageX-m.railh.offset().left:o.pageY-m.rail.offset().top,t=t?m.view.w:m.view.h,e(r>=o?t:-t)))},m.hasanimationframe=s,m.hascancelanimationframe=l,m.hasanimationframe?m.hascancelanimationframe||(l=function(){m.cancelAnimationFrame=!0}):(s=function(o){return setTimeout(o,16)},l=clearInterval),this.init=function(){if(m.saved.css=[],g.isie7mobile)return!0;if(g.hasmstouch&&m.css(m.ispage?o("html"):m.win,{"-ms-touch-action":"none"}),!m.ispage||!g.cantouch&&!g.isieold&&!g.isie9mobile){var i=m.docscroll;m.ispage&&(i=m.haswrapper?m.win:m.doc),g.isie9mobile||m.css(i,{"overflow-y":"hidden"}),m.ispage&&g.isie7&&("BODY"==m.doc[0].nodeName?m.css(o("html"),{"overflow-y":"hidden"}):"HTML"==m.doc[0].nodeName&&m.css(o("body"),{"overflow-y":"hidden"})),g.isios&&!m.ispage&&!m.haswrapper&&m.css(o("body"),{"-webkit-overflow-scrolling":"touch"});var s=o(document.createElement("div"));s.css({position:"relative",top:0,"float":"right",width:m.opt.cursorwidth,height:"0px","background-color":m.opt.cursorcolor,border:m.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":m.opt.cursorborderradius,"-moz-border-radius":m.opt.cursorborderradius,"border-radius":m.opt.cursorborderradius}),s.hborder=parseFloat(s.outerHeight()-s.innerHeight()),m.cursor=s;var l=o(document.createElement("div"));l.attr("id",m.id);var a,c,d,h=["left","right"];for(d in h)c=h[d],(a=m.opt.railpadding[c])?l.css("padding-"+c,a+"px"):m.opt.railpadding[c]=0;if(l.append(s),l.width=Math.max(parseFloat(m.opt.cursorwidth),s.outerWidth())+m.opt.railpadding.left+m.opt.railpadding.right,l.css({width:l.width+"px",zIndex:m.ispage?m.opt.zindex:m.opt.zindex+2,background:m.opt.background}),l.visibility=!0,l.scrollable=!0,l.align="left"==m.opt.railalign?0:1,m.rail=l,s=m.rail.drag=!1,m.opt.boxzoom&&!m.ispage&&!g.isieold&&(s=document.createElement("div"),m.bind(s,"click",m.doZoom),m.zoom=o(s),m.zoom.css({cursor:"pointer","z-index":m.opt.zindex,backgroundImage:"url("+n+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),m.opt.dblclickzoom&&m.bind(m.win,"dblclick",m.doZoom),g.cantouch&&m.opt.gesturezoom)&&(m.ongesturezoom=function(o){return o.scale>1.5&&m.doZoomIn(o),o.scale<.8&&m.doZoomOut(o),m.cancelEvent(o)},m.bind(m.win,"gestureend",m.ongesturezoom)),m.railh=!1,m.opt.horizrailenabled){m.css(i,{"overflow-x":"hidden"}),s=o(document.createElement("div")),s.css({position:"relative",top:0,height:m.opt.cursorwidth,width:"0px","background-color":m.opt.cursorcolor,border:m.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":m.opt.cursorborderradius,"-moz-border-radius":m.opt.cursorborderradius,"border-radius":m.opt.cursorborderradius}),s.wborder=parseFloat(s.outerWidth()-s.innerWidth()),m.cursorh=s;var p=o(document.createElement("div"));p.attr("id",m.id+"-hr"),p.height=1+Math.max(parseFloat(m.opt.cursorwidth),s.outerHeight()),p.css({height:p.height+"px",zIndex:m.ispage?m.opt.zindex:m.opt.zindex+2,background:m.opt.background}),p.append(s),p.visibility=!0,p.scrollable=!0,p.align="top"==m.opt.railvalign?0:1,m.railh=p,m.railh.drag=!1}if(m.ispage?(l.css({position:"fixed",top:"0px",height:"100%"}),l.align?l.css({right:"0px"}):l.css({left:"0px"}),m.body.append(l),m.railh&&(p.css({position:"fixed",left:"0px",width:"100%"}),p.align?p.css({bottom:"0px"}):p.css({top:"0px"}),m.body.append(p))):(m.ishwscroll?("static"==m.win.css("position")&&m.css(m.win,{position:"relative"}),i="HTML"==m.win[0].nodeName?m.body:m.win,m.zoom&&(m.zoom.css({position:"absolute",top:1,right:0,"margin-right":l.width+4}),i.append(m.zoom)),l.css({position:"absolute",top:0}),l.align?l.css({right:0}):l.css({left:0}),i.append(l),p&&(p.css({position:"absolute",left:0,bottom:0}),p.align?p.css({bottom:0}):p.css({top:0}),i.append(p))):(m.isfixed="fixed"==m.win.css("position"),i=m.isfixed?"fixed":"absolute",l.css({position:i}),m.zoom&&m.zoom.css({position:i}),m.updateScrollBar(),m.body.append(l),m.zoom&&m.body.append(m.zoom),m.railh&&(p.css({position:i}),m.body.append(p))),g.isios&&m.css(m.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),g.isie&&m.opt.disableoutline&&m.win.attr("hideFocus","true"),g.iswebkit&&m.opt.disableoutline&&m.win.css({outline:"none"})),m.opt.autohidemode===!1?m.autohidedom=!1:m.opt.autohidemode===!0?(m.autohidedom=o().add(m.rail),m.railh&&(m.autohidedom=m.autohidedom.add(m.railh))):"scroll"==m.opt.autohidemode?(m.autohidedom=o().add(m.rail),m.railh&&(m.autohidedom=m.autohidedom.add(m.railh))):"cursor"==m.opt.autohidemode?(m.autohidedom=o().add(m.cursor),m.railh&&(m.autohidedom=m.autohidedom.add(m.railh.cursor))):"hidden"==m.opt.autohidemode&&(m.autohidedom=!1,m.hide(),m.locked=!1),g.isie9mobile)m.scrollmom=new u(m),m.onmangotouch=function(){var o=m.getScrollTop(),e=m.getScrollLeft();if(o==m.scrollmom.lastscrolly&&e==m.scrollmom.lastscrollx)return!0;var t=o-m.mangotouch.sy,r=e-m.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(r,2)+Math.pow(t,2)))){var i=0>t?-1:1,n=0>r?-1:1,s=+new Date;m.mangotouch.lazy&&clearTimeout(m.mangotouch.lazy),s-m.mangotouch.tm>80||m.mangotouch.dry!=i||m.mangotouch.drx!=n?(m.scrollmom.stop(),m.scrollmom.reset(e,o),m.mangotouch.sy=o,m.mangotouch.ly=o,m.mangotouch.sx=e,m.mangotouch.lx=e,m.mangotouch.dry=i,m.mangotouch.drx=n,m.mangotouch.tm=s):(m.scrollmom.stop(),m.scrollmom.update(m.mangotouch.sx-r,m.mangotouch.sy-t),m.mangotouch.tm=s,t=Math.max(Math.abs(m.mangotouch.ly-o),Math.abs(m.mangotouch.lx-e)),m.mangotouch.ly=o,m.mangotouch.lx=e,t>2&&(m.mangotouch.lazy=setTimeout(function(){m.mangotouch.lazy=!1,m.mangotouch.dry=0,m.mangotouch.drx=0,m.mangotouch.tm=0,m.scrollmom.doMomentum(30)},100)))}},l=m.getScrollTop(),p=m.getScrollLeft(),m.mangotouch={sy:l,ly:l,dry:0,sx:p,lx:p,drx:0,lazy:!1,tm:0},m.bind(m.docscroll,"scroll",m.onmangotouch);else{if(g.cantouch||m.istouchcapable||m.opt.touchbehavior||g.hasmstouch){m.scrollmom=new u(m),m.ontouchstart=function(e){if(e.pointerType&&2!=e.pointerType)return!1;if(!m.locked){if(g.hasmstouch)for(var t=e.target?e.target:!1;t;){var r=o(t).getNiceScroll();if(r.length>0&&r[0].me==m.me)break;if(r.length>0)return!1;if("DIV"==t.nodeName&&t.id==m.id)break;t=t.parentNode?t.parentNode:!1}if(m.cancelScroll(),(t=m.getTarget(e))&&/INPUT/i.test(t.nodeName)&&/range/i.test(t.type))return m.stopPropagation(e);if(m.forcescreen&&(r=e,e={original:e.original?e.original:e},e.clientX=r.screenX,e.clientY=r.screenY),m.rail.drag={x:e.clientX,y:e.clientY,sx:m.scroll.x,sy:m.scroll.y,st:m.getScrollTop(),sl:m.getScrollLeft(),pt:2},m.opt.touchbehavior&&m.isiframe&&g.isie&&(r=m.win.position(),m.rail.drag.x+=r.left,m.rail.drag.y+=r.top),m.hasmoving=!1,m.lastmouseup=!1,m.scrollmom.reset(e.clientX,e.clientY),!g.cantouch&&!this.istouchcapable&&!g.hasmstouch){if(!t||!/INPUT|SELECT|TEXTAREA/i.test(t.nodeName))return!m.ispage&&g.hasmousecapture&&t.setCapture(),m.cancelEvent(e);/SUBMIT|CANCEL|BUTTON/i.test(o(t).attr("type"))&&(pc={tg:t,click:!1},m.preventclick=pc)}}},m.ontouchend=function(o){return o.pointerType&&2!=o.pointerType?!1:m.rail.drag&&2==m.rail.drag.pt&&(m.scrollmom.doMomentum(),m.rail.drag=!1,m.hasmoving&&(m.hasmoving=!1,m.lastmouseup=!0,m.hideCursor(),g.hasmousecapture&&document.releaseCapture(),!g.cantouch))?m.cancelEvent(o):void 0};var f=m.opt.touchbehavior&&m.isiframe&&!g.hasmousecapture;m.ontouchmove=function(o,e){if(o.pointerType&&2!=o.pointerType)return!1;if(m.rail.drag&&2==m.rail.drag.pt){if(g.cantouch&&"undefined"==typeof o.original)return!0;if(m.hasmoving=!0,m.preventclick&&!m.preventclick.click&&(m.preventclick.click=m.preventclick.tg.onclick||!1,m.preventclick.tg.onclick=m.onpreventclick),m.forcescreen){var t=o,o={original:o.original?o.original:o};o.clientX=t.screenX,o.clientY=t.screenY}if(t=ofy=0,f&&!e){var r=m.win.position(),t=-r.left;ofy=-r.top}var i=o.clientY+ofy,n=m.rail.drag.st-(i-m.rail.drag.y);m.ishwscroll&&m.opt.bouncescroll?0>n?n=Math.round(n/2):n>m.page.maxh&&(n=m.page.maxh+Math.round((n-m.page.maxh)/2)):(0>n&&(i=n=0),n>m.page.maxh&&(n=m.page.maxh,i=0));var s=o.clientX+t;if(m.railh&&m.railh.scrollable){var l=m.rail.drag.sl-(s-m.rail.drag.x);m.ishwscroll&&m.opt.bouncescroll?0>l?l=Math.round(l/2):l>m.page.maxw&&(l=m.page.maxw+Math.round((l-m.page.maxw)/2)):(0>l&&(s=l=0),l>m.page.maxw&&(l=m.page.maxw,s=0))}return m.synched("touchmove",function(){m.rail.drag&&2==m.rail.drag.pt&&(m.prepareTransition&&m.prepareTransition(0),m.rail.scrollable&&m.setScrollTop(n),m.scrollmom.update(s,i),m.railh&&m.railh.scrollable?(m.setScrollLeft(l),m.showCursor(n,l)):m.showCursor(n),g.isie10&&document.selection.clear())}),m.cancelEvent(o)}}}g.cantouch||m.opt.touchbehavior?(m.onpreventclick=function(o){return m.preventclick?(m.preventclick.tg.onclick=m.preventclick.click,m.preventclick=!1,m.cancelEvent(o)):void 0},m.onmousedown=m.ontouchstart,m.onmouseup=m.ontouchend,m.onclick=g.isios?!1:function(o){return m.lastmouseup?(m.lastmouseup=!1,m.cancelEvent(o)):!0},m.onmousemove=m.ontouchmove,g.cursorgrabvalue&&(m.css(m.ispage?m.doc:m.win,{cursor:g.cursorgrabvalue}),m.css(m.rail,{cursor:g.cursorgrabvalue}))):(m.onmousedown=function(o,e){if(!m.rail.drag||1==m.rail.drag.pt){if(m.locked)return m.cancelEvent(o);m.cancelScroll(),m.rail.drag={x:o.clientX,y:o.clientY,sx:m.scroll.x,sy:m.scroll.y,pt:1,hr:!!e};var t=m.getTarget(o);return!m.ispage&&g.hasmousecapture&&t.setCapture(),m.isiframe&&!g.hasmousecapture&&(m.saved.csspointerevents=m.doc.css("pointer-events"),m.css(m.doc,{"pointer-events":"none"})),m.cancelEvent(o)}},m.onmouseup=function(o){return m.rail.drag&&(g.hasmousecapture&&document.releaseCapture(),m.isiframe&&!g.hasmousecapture&&m.doc.css("pointer-events",m.saved.csspointerevents),1==m.rail.drag.pt)?(m.rail.drag=!1,m.cancelEvent(o)):void 0},m.onmousemove=function(o){if(m.rail.drag){if(1==m.rail.drag.pt){if(g.ischrome&&0==o.which)return m.onmouseup(o);if(m.cursorfreezed=!0,m.rail.drag.hr){m.scroll.x=m.rail.drag.sx+(o.clientX-m.rail.drag.x),m.scroll.x<0&&(m.scroll.x=0);var e=m.scrollvaluemaxw;m.scroll.x>e&&(m.scroll.x=e)}else m.scroll.y=m.rail.drag.sy+(o.clientY-m.rail.drag.y),m.scroll.y<0&&(m.scroll.y=0),e=m.scrollvaluemax,m.scroll.y>e&&(m.scroll.y=e);return m.synched("mousemove",function(){m.rail.drag&&1==m.rail.drag.pt&&(m.showCursor(),m.rail.drag.hr?m.doScrollLeft(Math.round(m.scroll.x*m.scrollratio.x)):m.doScrollTop(Math.round(m.scroll.y*m.scrollratio.y)))}),m.cancelEvent(o)}}else m.checkarea=!0}),(g.cantouch||m.opt.touchbehavior)&&m.bind(m.win,"mousedown",m.onmousedown),g.hasmstouch&&(m.css(m.rail,{"-ms-touch-action":"none"}),m.css(m.cursor,{"-ms-touch-action":"none"}),m.bind(m.win,"MSPointerDown",m.ontouchstart),m.bind(document,"MSPointerUp",m.ontouchend),m.bind(document,"MSPointerMove",m.ontouchmove),m.bind(m.cursor,"MSGestureHold",function(o){o.preventDefault()}),m.bind(m.cursor,"contextmenu",function(o){o.preventDefault()})),this.istouchcapable&&(m.bind(m.win,"touchstart",m.ontouchstart),m.bind(document,"touchend",m.ontouchend),m.bind(document,"touchmove",m.ontouchmove)),m.bind(m.cursor,"mousedown",m.onmousedown),m.bind(m.cursor,"mouseup",m.onmouseup),m.railh&&(m.bind(m.cursorh,"mousedown",function(o){m.onmousedown(o,!0)}),m.bind(m.cursorh,"mouseup",function(o){return m.rail.drag&&2==m.rail.drag.pt?void 0:(m.rail.drag=!1,m.hasmoving=!1,m.hideCursor(),g.hasmousecapture&&document.releaseCapture(),m.cancelEvent(o))})),m.bind(document,"mouseup",m.onmouseup),g.hasmousecapture&&m.bind(m.win,"mouseup",m.onmouseup),m.bind(document,"mousemove",m.onmousemove),m.onclick&&m.bind(document,"click",m.onclick),!g.cantouch&&!m.opt.touchbehavior&&(m.rail.mouseenter(function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.rail.mouseleave(function(){m.rail.active=!1,m.rail.drag||m.hideCursor()}),m.opt.sensitiverail&&(m.rail.click(function(o){m.doRailClick(o,!1,!1)}),m.rail.dblclick(function(o){m.doRailClick(o,!0,!1)}),m.cursor.click(function(o){m.cancelEvent(o)}),m.cursor.dblclick(function(o){m.cancelEvent(o)})),m.railh&&(m.railh.mouseenter(function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.railh.mouseleave(function(){m.rail.active=!1,m.rail.drag||m.hideCursor()})),m.zoom&&(m.zoom.mouseenter(function(){m.canshowonmouseevent&&m.showCursor(),m.rail.active=!0}),m.zoom.mouseleave(function(){m.rail.active=!1,m.rail.drag||m.hideCursor()}))),m.opt.enablemousewheel&&(m.isiframe||m.bind(g.isie&&m.ispage?document:m.docscroll,"mousewheel",m.onmousewheel),m.bind(m.rail,"mousewheel",m.onmousewheel),m.railh&&m.bind(m.railh,"mousewheel",m.onmousewheelhr)),!m.ispage&&!g.cantouch&&!/HTML|BODY/.test(m.win[0].nodeName)&&(m.win.attr("tabindex")||m.win.attr({tabindex:r++}),m.win.focus(function(o){e=m.getTarget(o).id||!0,m.hasfocus=!0,m.canshowonmouseevent&&m.noticeCursor()}),m.win.blur(function(){e=!1,m.hasfocus=!1}),m.win.mouseenter(function(o){t=m.getTarget(o).id||!0,m.hasmousefocus=!0,m.canshowonmouseevent&&m.noticeCursor()}),m.win.mouseleave(function(){t=!1,m.hasmousefocus=!1}))}if(m.onkeypress=function(o){if(m.locked&&0==m.page.maxh)return!0;var o=o?o:window.e,r=m.getTarget(o);if(r&&/INPUT|TEXTAREA|SELECT|OPTION/.test(r.nodeName)&&(!r.getAttribute("type")&&!r.type||!/submit|button|cancel/i.tp))return!0;if(m.hasfocus||m.hasmousefocus&&!e||m.ispage&&!e&&!t){var r=o.keyCode,i=o.ctrlKey||!1;if(m.locked&&27!=r)return m.cancelEvent(o);var n=!1;switch(r){case 38:case 63233:m.doScrollBy(72),n=!0;break;case 40:case 63235:m.doScrollBy(-72),n=!0;break;case 37:case 63232:m.railh&&(i?m.doScrollLeft(0):m.doScrollLeftBy(72),n=!0);break;case 39:case 63234:m.railh&&(i?m.doScrollLeft(m.page.maxw):m.doScrollLeftBy(-72),n=!0);break;case 33:case 63276:m.doScrollBy(m.view.h),n=!0;break;case 34:case 63277:m.doScrollBy(-m.view.h),n=!0;break;case 36:case 63273:m.railh&&i?m.doScrollPos(0,0):m.doScrollTo(0),n=!0;break;case 35:case 63275:m.railh&&i?m.doScrollPos(m.page.maxw,m.page.maxh):m.doScrollTo(m.page.maxh),n=!0;break;case 32:m.opt.spacebarenabled&&(m.doScrollBy(-m.view.h),n=!0);break;case 27:m.zoomactive&&(m.doZoom(),n=!0)}if(n)return m.cancelEvent(o)}},m.opt.enablekeyboard&&m.bind(document,g.isopera&&!g.isopera12?"keypress":"keydown",m.onkeypress),m.bind(window,"resize",m.resize),m.bind(window,"orientationchange",m.resize),m.bind(window,"load",m.resize),g.ischrome&&!m.ispage&&!m.haswrapper){var w=m.win.attr("style"),l=parseFloat(m.win.css("width"))+1;m.win.css("width",l),m.synched("chromefix",function(){m.win.attr("style",w)})}m.onAttributeChange=function(){m.lazyResize()},m.ispage||m.haswrapper||("WebKitMutationObserver"in window?(m.observer=new WebKitMutationObserver(function(o){o.forEach(m.onAttributeChange)}),m.observer.observe(m.win[0],{attributes:!0,subtree:!1})):(m.bind(m.win,g.isie&&!g.isie9?"propertychange":"DOMAttrModified",m.onAttributeChange),g.isie9&&m.win[0].attachEvent("onpropertychange",m.onAttributeChange))),!m.ispage&&m.opt.boxzoom&&m.bind(window,"resize",m.resizeZoom),m.istextarea&&m.bind(m.win,"mouseup",m.resize),m.resize()}if("IFRAME"==this.doc[0].nodeName){var v=function(){m.iframexd=!1;try{var e="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(t){m.iframexd=!0,e=!1}if(m.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(m.forcescreen=!0,m.isiframe&&(m.iframe={doc:o(e),html:m.doc.contents().find("html")[0],body:m.doc.contents().find("body")[0]},m.getContentSize=function(){return{w:Math.max(m.iframe.html.scrollWidth,m.iframe.body.scrollWidth),h:Math.max(m.iframe.html.scrollHeight,m.iframe.body.scrollHeight)}},m.docscroll=o(m.iframe.body)),!g.isios&&m.opt.iframeautoresize&&!m.isiframe){m.win.scrollTop(0),m.doc.height("");var r=Math.max(e.getElementsByTagName("html")[0].scrollHeight,e.body.scrollHeight);m.doc.height(r)}m.resize(),g.isie7&&m.css(o(m.iframe.html),{"overflow-y":"hidden"}),m.css(o(m.iframe.body),{"overflow-y":"hidden"}),"contentWindow"in this?m.bind(this.contentWindow,"scroll",m.onscroll):m.bind(e,"scroll",m.onscroll),m.opt.enablemousewheel&&m.bind(e,"mousewheel",m.onmousewheel),m.opt.enablekeyboard&&m.bind(e,g.isopera?"keypress":"keydown",m.onkeypress),(g.cantouch||m.opt.touchbehavior)&&(m.bind(e,"mousedown",m.onmousedown),m.bind(e,"mousemove",function(o){m.onmousemove(o,!0)}),g.cursorgrabvalue&&m.css(o(e.body),{cursor:g.cursorgrabvalue})),m.bind(e,"mouseup",m.onmouseup),m.zoom&&(m.opt.dblclickzoom&&m.bind(e,"dblclick",m.doZoom),m.ongesturezoom&&m.bind(e,"gestureend",m.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){v.call(m.doc[0],!1)},500),m.bind(this.doc,"load",v)}},this.showCursor=function(o,e){m.cursortimeout&&(clearTimeout(m.cursortimeout),m.cursortimeout=0),m.rail&&(m.autohidedom&&(m.autohidedom.stop().css({opacity:m.opt.cursoropacitymax}),m.cursoractive=!0),"undefined"!=typeof o&&o!==!1&&(m.scroll.y=Math.round(1*o/m.scrollratio.y)),"undefined"!=typeof e&&(m.scroll.x=Math.round(1*e/m.scrollratio.x)),m.cursor.css({height:m.cursorheight,top:m.scroll.y}),m.cursorh&&(!m.rail.align&&m.rail.visibility?m.cursorh.css({width:m.cursorwidth,left:m.scroll.x+m.rail.width}):m.cursorh.css({width:m.cursorwidth,left:m.scroll.x}),m.cursoractive=!0),m.zoom&&m.zoom.stop().css({opacity:m.opt.cursoropacitymax}))},this.hideCursor=function(o){!m.cursortimeout&&m.rail&&m.autohidedom&&(m.cursortimeout=setTimeout(function(){m.rail.active&&m.showonmouseevent||(m.autohidedom.stop().animate({opacity:m.opt.cursoropacitymin}),m.zoom&&m.zoom.stop().animate({opacity:m.opt.cursoropacitymin}),m.cursoractive=!1),m.cursortimeout=0},o||400))},this.noticeCursor=function(o,e,t){m.showCursor(e,t),m.rail.active||m.hideCursor(o)},this.getContentSize=m.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:m.haswrapper?function(){return{w:m.doc.outerWidth()+parseInt(m.win.css("paddingLeft"))+parseInt(m.win.css("paddingRight")),h:m.doc.outerHeight()+parseInt(m.win.css("paddingTop"))+parseInt(m.win.css("paddingBottom"))}}:function(){return{w:m.docscroll[0].scrollWidth,h:m.docscroll[0].scrollHeight}},this.onResize=function(o,e){if(!m.win)return!1;if(!m.haswrapper&&!m.ispage){if("none"==m.win.css("display"))return m.visibility&&m.hideRail().hideRailHr(),!1;!m.hidden&&!m.visibility&&m.showRail().showRailHr()}var t=m.page.maxh,r=m.page.maxw,i=m.view.w;if(m.view={w:m.ispage?m.win.width():parseInt(m.win[0].clientWidth),h:m.ispage?m.win.height():parseInt(m.win[0].clientHeight)},m.page=e?e:m.getContentSize(),m.page.maxh=Math.max(0,m.page.h-m.view.h),m.page.maxw=Math.max(0,m.page.w-m.view.w),m.page.maxh==t&&m.page.maxw==r&&m.view.w==i){if(m.ispage)return m;if(t=m.win.offset(),m.lastposition&&(r=m.lastposition,r.top==t.top&&r.left==t.left))return m;m.lastposition=t}return 0==m.page.maxh?(m.hideRail(),m.scrollvaluemax=0,m.scroll.y=0,m.scrollratio.y=0,m.cursorheight=0,m.setScrollTop(0),m.rail.scrollable=!1):m.rail.scrollable=!0,0==m.page.maxw?(m.hideRailHr(),m.scrollvaluemaxw=0,m.scroll.x=0,m.scrollratio.x=0,m.cursorwidth=0,m.setScrollLeft(0),m.railh.scrollable=!1):m.railh.scrollable=!0,m.locked=0==m.page.maxh&&0==m.page.maxw,m.locked?(m.ispage||m.updateScrollBar(m.view),!1):(m.hidden||m.visibility?!m.hidden&&!m.railh.visibility&&m.showRailHr():m.showRail().showRailHr(),m.istextarea&&m.win.css("resize")&&"none"!=m.win.css("resize")&&(m.view.h-=20),m.ispage||m.updateScrollBar(m.view),m.cursorheight=Math.min(m.view.h,Math.round(m.view.h*(m.view.h/m.page.h))),m.cursorheight=Math.max(m.opt.cursorminheight,m.cursorheight),m.cursorwidth=Math.min(m.view.w,Math.round(m.view.w*(m.view.w/m.page.w))),m.cursorwidth=Math.max(m.opt.cursorminheight,m.cursorwidth),m.scrollvaluemax=m.view.h-m.cursorheight-m.cursor.hborder,m.railh&&(m.railh.width=m.page.maxh>0?m.view.w-m.rail.width:m.view.w,m.scrollvaluemaxw=m.railh.width-m.cursorwidth-m.cursorh.wborder),m.scrollratio={x:m.page.maxw/m.scrollvaluemaxw,y:m.page.maxh/m.scrollvaluemax},m.getScrollTop()>m.page.maxh?m.doScroll(m.page.maxh):(m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.scroll.x=Math.round(m.getScrollLeft()*(1/m.scrollratio.x)),m.cursoractive&&m.noticeCursor()),m.scroll.y&&0==m.getScrollTop()&&m.doScrollTo(Math.floor(m.scroll.y*m.scrollratio.y)),m)},this.resize=function(){return m.delayed("resize",m.onResize,30),m},this.lazyResize=function(){m.delayed("resize",m.resize,250)},this._bind=function(o,e,t,r){m.events.push({e:o,n:e,f:t,b:r}),o.addEventListener?o.addEventListener(e,t,r||!1):o.attachEvent?o.attachEvent("on"+e,t):o["on"+e]=t},this.bind=function(o,e,t,r){var i="jquery"in o?o[0]:o;i.addEventListener?(g.cantouch&&/mouseup|mousedown|mousemove/.test(e)&&m._bind(i,"mousedown"==e?"touchstart":"mouseup"==e?"touchend":"touchmove",function(o){if(o.touches){if(o.touches.length<2){var e=o.touches.length?o.touches[0]:o;e.original=o,t.call(this,e)}}else o.changedTouches&&(e=o.changedTouches[0],e.original=o,t.call(this,e))},r||!1),m._bind(i,e,t,r||!1),
"mousewheel"==e&&m._bind(i,"DOMMouseScroll",t,r||!1),g.cantouch&&"mouseup"==e&&m._bind(i,"touchcancel",t,r||!1)):m._bind(i,e,function(o){return(o=o||window.event||!1)&&o.srcElement&&(o.target=o.srcElement),t.call(i,o)===!1||r===!1?m.cancelEvent(o):!0})},this._unbind=function(o,e,t,r){o.removeEventListener?o.removeEventListener(e,t,r):o.detachEvent?o.detachEvent("on"+e,t):o["on"+e]=!1},this.unbindAll=function(){for(var o=0;o<m.events.length;o++){var e=m.events[o];m._unbind(e.e,e.n,e.f,e.b)}},this.cancelEvent=function(o){return(o=o.original?o.original:o?o:window.event||!1)?(o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation(),o.preventManipulation&&o.preventManipulation(),o.cancelBubble=!0,o.cancel=!0,o.returnValue=!1):!1},this.stopPropagation=function(o){return(o=o.original?o.original:o?o:window.event||!1)?o.stopPropagation?o.stopPropagation():(o.cancelBubble&&(o.cancelBubble=!0),!1):!1},this.showRail=function(){return 0==m.page.maxh||!m.ispage&&"none"==m.win.css("display")||(m.visibility=!0,m.rail.visibility=!0,m.rail.css("display","block")),m},this.showRailHr=function(){return m.railh?(0==m.page.maxw||!m.ispage&&"none"==m.win.css("display")||(m.railh.visibility=!0,m.railh.css("display","block")),m):m},this.hideRail=function(){return m.visibility=!1,m.rail.visibility=!1,m.rail.css("display","none"),m},this.hideRailHr=function(){return m.railh?(m.railh.visibility=!1,m.railh.css("display","none"),m):m},this.show=function(){return m.hidden=!1,m.locked=!1,m.showRail().showRailHr()},this.hide=function(){return m.hidden=!0,m.locked=!0,m.hideRail().hideRailHr()},this.remove=function(){m.doZoomOut(),m.unbindAll(),m.observer!==!1&&m.observer.disconnect(),m.events=[],m.cursor&&(m.cursor.remove(),m.cursor=null),m.cursorh&&(m.cursorh.remove(),m.cursorh=null),m.rail&&(m.rail.remove(),m.rail=null),m.railh&&(m.railh.remove(),m.railh=null),m.zoom&&(m.zoom.remove(),m.zoom=null);for(var o=0;o<m.saved.css.length;o++){var e=m.saved.css[o];e[0].css(e[1],"undefined"==typeof e[2]?"":e[2])}return m.saved=!1,m.me.data("__nicescroll",""),m.me=null,m.doc=null,m.docscroll=null,m.win=null,m},this.scrollstart=function(o){return this.onscrollstart=o,m},this.scrollend=function(o){return this.onscrollend=o,m},this.scrollcancel=function(o){return this.onscrollcancel=o,m},this.zoomin=function(o){return this.onzoomin=o,m},this.zoomout=function(o){return this.onzoomout=o,m},this.isScrollable=function(e){for(e=e.target?e.target:e;e&&1==e.nodeType&&!/BODY|HTML/.test(e.nodeName);){var t=o(e);if(/scroll|auto/.test(t.css("overflowY")||t.css("overflowX")||t.css("overflow")||""))return e.clientHeight!=e.scrollHeight;e=e.parentNode?e.parentNode:!1}return!1},this.onmousewheel=function(o){return m.locked?!0:m.rail.scrollable?(m.opt.preservenativescrolling&&m.checkarea&&(m.checkarea=!1,m.nativescrollingarea=m.isScrollable(o)),m.nativescrollingarea?!0:m.locked?m.cancelEvent(o):m.rail.drag?m.cancelEvent(o):(p(o,!1),m.cancelEvent(o))):m.railh&&m.railh.scrollable?m.onmousewheelhr(o):!0},this.onmousewheelhr=function(o){return m.locked||!m.railh.scrollable?!0:(m.opt.preservenativescrolling&&m.checkarea&&(m.checkarea=!1,m.nativescrollingarea=m.isScrollable(o)),m.nativescrollingarea?!0:m.locked?m.cancelEvent(o):m.rail.drag?m.cancelEvent(o):(p(o,!0),m.cancelEvent(o)))},this.stop=function(){return m.cancelScroll(),m.scrollmon&&m.scrollmon.stop(),m.cursorfreezed=!1,m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.noticeCursor(),m},this.getTransitionSpeed=function(o){var e=Math.round(10*m.opt.scrollspeed),o=Math.min(e,Math.round(o/20*m.opt.scrollspeed));return o>20?o:0},m.opt.smoothscroll?m.ishwscroll&&g.hastransition&&m.opt.usetransition?(this.prepareTransition=function(o,e){var t=e?o>20?o:0:m.getTransitionSpeed(o),r=t?g.prefixstyle+"transform "+t+"ms ease-out":"";return m.lasttransitionstyle&&m.lasttransitionstyle==r||(m.lasttransitionstyle=r,m.doc.css(g.transitionstyle,r)),t},this.doScrollLeft=function(o,e){var t=m.scrollrunning?m.newscrolly:m.getScrollTop();m.doScrollPos(o,t,e)},this.doScrollTop=function(o,e){var t=m.scrollrunning?m.newscrollx:m.getScrollLeft();m.doScrollPos(t,o,e)},this.doScrollPos=function(o,e,t){var r=m.getScrollTop(),i=m.getScrollLeft();return((m.newscrolly-r)*(e-r)<0||(m.newscrollx-i)*(o-i)<0)&&m.cancelScroll(),m.newscrolly=e,m.newscrollx=o,m.newscrollspeed=t||!1,m.timer?!1:void(m.timer=setTimeout(function(){var t,r,i=m.getScrollTop(),n=m.getScrollLeft();t=o-n,r=e-i,t=Math.round(Math.sqrt(Math.pow(t,2)+Math.pow(r,2))),t=m.prepareTransition(m.newscrollspeed?m.newscrollspeed:t),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),t>0&&(!m.scrollrunning&&m.onscrollstart&&m.onscrollstart.call(m,{type:"scrollstart",current:{x:n,y:i},request:{x:o,y:e},end:{x:m.newscrollx,y:m.newscrolly},speed:t}),g.transitionend?m.scrollendtrapped||(m.scrollendtrapped=!0,m.bind(m.doc,g.transitionend,m.onScrollEnd,!1)):(m.scrollendtrapped&&clearTimeout(m.scrollendtrapped),m.scrollendtrapped=setTimeout(m.onScrollEnd,t)),m.timerscroll={bz:new BezierClass(i,m.newscrolly,t,0,0,.58,1),bh:new BezierClass(n,m.newscrollx,t,0,0,.58,1)},m.cursorfreezed||(m.timerscroll.tm=setInterval(function(){m.showCursor(m.getScrollTop(),m.getScrollLeft())},60))),m.synched("doScroll-set",function(){m.timer=0,m.scrollendtrapped&&(m.scrollrunning=!0),m.setScrollTop(m.newscrolly),m.setScrollLeft(m.newscrollx),m.scrollendtrapped||m.onScrollEnd()})},50))},this.cancelScroll=function(){if(!m.scrollendtrapped)return!0;var o=m.getScrollTop(),e=m.getScrollLeft();return m.scrollrunning=!1,g.transitionend||clearTimeout(g.transitionend),m.scrollendtrapped=!1,m._unbind(m.doc,g.transitionend,m.onScrollEnd),m.prepareTransition(0),m.setScrollTop(o),m.railh&&m.setScrollLeft(e),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),m.timerscroll=!1,m.cursorfreezed=!1,m.showCursor(o,e),m},this.onScrollEnd=function(){m.scrollendtrapped&&m._unbind(m.doc,g.transitionend,m.onScrollEnd),m.scrollendtrapped=!1,m.prepareTransition(0),m.timerscroll&&m.timerscroll.tm&&clearInterval(m.timerscroll.tm),m.timerscroll=!1;var o=m.getScrollTop(),e=m.getScrollLeft();return m.setScrollTop(o),m.railh&&m.setScrollLeft(e),m.noticeCursor(!1,o,e),m.cursorfreezed=!1,0>o?o=0:o>m.page.maxh&&(o=m.page.maxh),0>e?e=0:e>m.page.maxw&&(e=m.page.maxw),o!=m.newscrolly||e!=m.newscrollx?m.doScrollPos(e,o,m.opt.snapbackspeed):(m.onscrollend&&m.scrollrunning&&m.onscrollend.call(m,{type:"scrollend",current:{x:e,y:o},end:{x:m.newscrollx,y:m.newscrolly}}),void(m.scrollrunning=!1))}):(this.doScrollLeft=function(o){var e=m.scrollrunning?m.newscrolly:m.getScrollTop();m.doScrollPos(o,e)},this.doScrollTop=function(o){var e=m.scrollrunning?m.newscrollx:m.getScrollLeft();m.doScrollPos(e,o)},this.doScrollPos=function(o,e){function t(){if(m.cancelAnimationFrame)return!0;if(m.scrollrunning=!0,d=1-d)return m.timer=s(t)||1;var o=0,e=sy=m.getScrollTop();if(m.dst.ay){var e=m.bzscroll?m.dst.py+m.bzscroll.getNow()*m.dst.ay:m.newscrolly,r=e-sy;(0>r&&e<m.newscrolly||r>0&&e>m.newscrolly)&&(e=m.newscrolly),m.setScrollTop(e),e==m.newscrolly&&(o=1)}else o=1;var i=sx=m.getScrollLeft();m.dst.ax?(i=m.bzscroll?m.dst.px+m.bzscroll.getNow()*m.dst.ax:m.newscrollx,r=i-sx,(0>r&&i<m.newscrollx||r>0&&i>m.newscrollx)&&(i=m.newscrollx),m.setScrollLeft(i),i==m.newscrollx&&(o+=1)):o+=1,2==o?(m.timer=0,m.cursorfreezed=!1,m.bzscroll=!1,m.scrollrunning=!1,0>e?e=0:e>m.page.maxh&&(e=m.page.maxh),0>i?i=0:i>m.page.maxw&&(i=m.page.maxw),i!=m.newscrollx||e!=m.newscrolly?m.doScrollPos(i,e):m.onscrollend&&m.onscrollend.call(m,{type:"scrollend",current:{x:sx,y:sy},end:{x:m.newscrollx,y:m.newscrolly}})):m.timer=s(t)||1}if(e="undefined"==typeof e||e===!1?m.getScrollTop(!0):e,m.timer&&m.newscrolly==e&&m.newscrollx==o)return!0;m.timer&&l(m.timer),m.timer=0;var r=m.getScrollTop(),i=m.getScrollLeft();((m.newscrolly-r)*(e-r)<0||(m.newscrollx-i)*(o-i)<0)&&m.cancelScroll(),m.newscrolly=e,m.newscrollx=o,m.bouncescroll&&m.rail.visibility||(m.newscrolly<0?m.newscrolly=0:m.newscrolly>m.page.maxh&&(m.newscrolly=m.page.maxh)),m.bouncescroll&&m.railh.visibility||(m.newscrollx<0?m.newscrollx=0:m.newscrollx>m.page.maxw&&(m.newscrollx=m.page.maxw)),m.dst={},m.dst.x=o-i,m.dst.y=e-r,m.dst.px=i,m.dst.py=r;var n=Math.round(Math.sqrt(Math.pow(m.dst.x,2)+Math.pow(m.dst.y,2)));m.dst.ax=m.dst.x/n,m.dst.ay=m.dst.y/n;var a=0,c=n;if(0==m.dst.x?(a=r,c=e,m.dst.ay=1,m.dst.py=0):0==m.dst.y&&(a=i,c=o,m.dst.ax=1,m.dst.px=0),n=m.getTransitionSpeed(n),m.bzscroll=n>0?m.bzscroll?m.bzscroll.update(c,n):new BezierClass(a,c,n,0,1,0,1):!1,!m.timer){(r==m.page.maxh&&e>=m.page.maxh||i==m.page.maxw&&o>=m.page.maxw)&&m.checkContentSize();var d=1;m.cancelAnimationFrame=!1,m.timer=1,m.onscrollstart&&!m.scrollrunning&&m.onscrollstart.call(m,{type:"scrollstart",current:{x:i,y:r},request:{x:o,y:e},end:{x:m.newscrollx,y:m.newscrolly},speed:n}),t(),(r==m.page.maxh&&e>=r||i==m.page.maxw&&o>=i)&&m.checkContentSize(),m.noticeCursor()}},this.cancelScroll=function(){return m.timer&&l(m.timer),m.timer=0,m.bzscroll=!1,m.scrollrunning=!1,m}):(this.doScrollLeft=function(o,e){var t=m.getScrollTop();m.doScrollPos(o,t,e)},this.doScrollTop=function(o,e){var t=m.getScrollLeft();m.doScrollPos(t,o,e)},this.doScrollPos=function(o,e){var t=o>m.page.maxw?m.page.maxw:o;0>t&&(t=0);var r=e>m.page.maxh?m.page.maxh:e;0>r&&(r=0),m.synched("scroll",function(){m.setScrollTop(r),m.setScrollLeft(t)})},this.cancelScroll=function(){}),this.doScrollBy=function(o,e){var t=0,t=e?Math.floor((m.scroll.y-o)*m.scrollratio.y):(m.timer?m.newscrolly:m.getScrollTop(!0))-o;if(m.bouncescroll){var r=Math.round(m.view.h/2);-r>t?t=-r:t>m.page.maxh+r&&(t=m.page.maxh+r)}return m.cursorfreezed=!1,py=m.getScrollTop(!0),0>t&&py<=0?m.noticeCursor():t>m.page.maxh&&py>=m.page.maxh?(m.checkContentSize(),m.noticeCursor()):void m.doScrollTop(t)},this.doScrollLeftBy=function(o,e){var t=0,t=e?Math.floor((m.scroll.x-o)*m.scrollratio.x):(m.timer?m.newscrollx:m.getScrollLeft(!0))-o;if(m.bouncescroll){var r=Math.round(m.view.w/2);-r>t?t=-r:t>m.page.maxw+r&&(t=m.page.maxw+r)}return m.cursorfreezed=!1,px=m.getScrollLeft(!0),0>t&&px<=0?m.noticeCursor():t>m.page.maxw&&px>=m.page.maxw?m.noticeCursor():void m.doScrollLeft(t)},this.doScrollTo=function(o,e){e&&Math.round(o*m.scrollratio.y),m.cursorfreezed=!1,m.doScrollTop(o)},this.checkContentSize=function(){var o=m.getContentSize();(o.h!=m.page.h||o.w!=m.page.w)&&m.resize(!1,o)},m.onscroll=function(){m.rail.drag||m.cursorfreezed||m.synched("scroll",function(){m.scroll.y=Math.round(m.getScrollTop()*(1/m.scrollratio.y)),m.railh&&(m.scroll.x=Math.round(m.getScrollLeft()*(1/m.scrollratio.x))),m.noticeCursor()})},m.bind(m.docscroll,"scroll",m.onscroll),this.doZoomIn=function(e){if(!m.zoomactive){m.zoomactive=!0,m.zoomrestore={style:{}};var t,r="position,top,left,zIndex,backgroundColor,marginTop,marginBottom,marginLeft,marginRight".split(","),i=m.win[0].style;for(t in r){var n=r[t];m.zoomrestore.style[n]="undefined"!=typeof i[n]?i[n]:""}return m.zoomrestore.style.width=m.win.css("width"),m.zoomrestore.style.height=m.win.css("height"),m.zoomrestore.padding={w:m.win.outerWidth()-m.win.width(),h:m.win.outerHeight()-m.win.height()},g.isios4&&(m.zoomrestore.scrollTop=o(window).scrollTop(),o(window).scrollTop(0)),m.win.css({position:g.isios4?"absolute":"fixed",top:0,left:0,"z-index":m.opt.zindex+100,margin:"0px"}),r=m.win.css("backgroundColor"),(""==r||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(r))&&m.win.css("backgroundColor","#fff"),m.rail.css({"z-index":m.opt.zindex+110}),m.zoom.css({"z-index":m.opt.zindex+112}),m.zoom.css("backgroundPosition","0px -18px"),m.resizeZoom(),m.onzoomin&&m.onzoomin.call(m),m.cancelEvent(e)}},this.doZoomOut=function(e){return m.zoomactive?(m.zoomactive=!1,m.win.css("margin",""),m.win.css(m.zoomrestore.style),g.isios4&&o(window).scrollTop(m.zoomrestore.scrollTop),m.rail.css({"z-index":m.ispage?m.opt.zindex:m.opt.zindex+2}),m.zoom.css({"z-index":m.opt.zindex}),m.zoomrestore=!1,m.zoom.css("backgroundPosition","0px 0px"),m.onResize(),m.onzoomout&&m.onzoomout.call(m),m.cancelEvent(e)):void 0},this.doZoom=function(o){return m.zoomactive?m.doZoomOut(o):m.doZoomIn(o)},this.resizeZoom=function(){if(m.zoomactive){var e=m.getScrollTop();m.win.css({width:o(window).width()-m.zoomrestore.padding.w+"px",height:o(window).height()-m.zoomrestore.padding.h+"px"}),m.onResize(),m.setScrollTop(Math.min(m.page.maxh,e))}},this.init(),o.nicescroll.push(this)},u=function(o){var e=this;this.nc=o,this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0,this.snapy=this.snapx=!1,this.demuly=this.demulx=0,this.lastscrolly=this.lastscrollx=-1,this.timer=this.chky=this.chkx=0,this.time=function(){return+new Date},this.reset=function(o,t){e.stop();var r=e.time();e.steptime=0,e.lasttime=r,e.speedx=0,e.speedy=0,e.lastx=o,e.lasty=t,e.lastscrollx=-1,e.lastscrolly=-1},this.update=function(o,t){var r=e.time();e.steptime=r-e.lasttime,e.lasttime=r;var r=t-e.lasty,i=o-e.lastx,n=e.nc.getScrollTop(),s=e.nc.getScrollLeft();n+=r,s+=i,e.snapx=0>s||s>e.nc.page.maxw,e.snapy=0>n||n>e.nc.page.maxh,e.speedx=i,e.speedy=r,e.lastx=o,e.lasty=t},this.stop=function(){e.nc.unsynched("domomentum2d"),e.timer&&clearTimeout(e.timer),e.timer=0,e.lastscrollx=-1,e.lastscrolly=-1},this.doSnapy=function(o,t){var r=!1;0>t?(t=0,r=!0):t>e.nc.page.maxh&&(t=e.nc.page.maxh,r=!0),0>o?(o=0,r=!0):o>e.nc.page.maxw&&(o=e.nc.page.maxw,r=!0),r&&e.nc.doScrollPos(o,t,e.nc.opt.snapbackspeed)},this.doMomentum=function(o){var t=e.time(),r=o?t+o:e.lasttime,o=e.nc.getScrollLeft(),i=e.nc.getScrollTop(),n=e.nc.page.maxh,s=e.nc.page.maxw;if(e.speedx=s>0?Math.min(60,e.speedx):0,e.speedy=n>0?Math.min(60,e.speedy):0,r=r&&50>=t-r,(0>i||i>n||0>o||o>s)&&(r=!1),o=e.speedx&&r?e.speedx:!1,e.speedy&&r&&e.speedy||o){var l=Math.max(16,e.steptime);l>50&&(o=l/50,e.speedx*=o,e.speedy*=o,l=50),e.demulxy=0,e.lastscrollx=e.nc.getScrollLeft(),e.chkx=e.lastscrollx,e.lastscrolly=e.nc.getScrollTop(),e.chky=e.lastscrolly;var a=e.lastscrollx,c=e.lastscrolly,d=function(){var o=e.time()-t>600?.04:.02;e.speedx&&(a=Math.floor(e.lastscrollx-e.speedx*(1-e.demulxy)),e.lastscrollx=a,0>a||a>s)&&(o=.1),e.speedy&&(c=Math.floor(e.lastscrolly-e.speedy*(1-e.demulxy)),e.lastscrolly=c,0>c||c>n)&&(o=.1),e.demulxy=Math.min(1,e.demulxy+o),e.nc.synched("domomentum2d",function(){e.speedx&&(e.nc.getScrollLeft()!=e.chkx&&e.stop(),e.chkx=a,e.nc.setScrollLeft(a)),e.speedy&&(e.nc.getScrollTop()!=e.chky&&e.stop(),e.chky=c,e.nc.setScrollTop(c)),e.timer||(e.nc.hideCursor(),e.doSnapy(a,c))}),e.demulxy<1?e.timer=setTimeout(d,l):(e.stop(),e.nc.hideCursor(),e.doSnapy(a,c))};d()}else e.doSnapy(e.nc.getScrollLeft(),e.nc.getScrollTop())}},p=o.fn.scrollTop;o.cssHooks.pageYOffset={get:function(e){var t=o.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollTop():p.call(e)},set:function(e,t){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.setScrollTop(parseInt(t)):p.call(e,t),this}},o.fn.scrollTop=function(e){if("undefined"==typeof e){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollTop():p.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollTop(parseInt(e)):p.call(o(this),e)})};var m=o.fn.scrollLeft;o.cssHooks.pageXOffset={get:function(e){var t=o.data(e,"__nicescroll")||!1;return t&&t.ishwscroll?t.getScrollLeft():m.call(e)},set:function(e,t){var r=o.data(e,"__nicescroll")||!1;return r&&r.ishwscroll?r.setScrollLeft(parseInt(t)):m.call(e,t),this}},o.fn.scrollLeft=function(e){if("undefined"==typeof e){var t=this[0]?o.data(this[0],"__nicescroll")||!1:!1;return t&&t.ishwscroll?t.getScrollLeft():m.call(this)}return this.each(function(){var t=o.data(this,"__nicescroll")||!1;t&&t.ishwscroll?t.setScrollLeft(parseInt(e)):m.call(o(this),e)})};var f=function(e){var t=this;if(this.length=0,this.name="nicescrollarray",this.each=function(o){for(var e=0;e<t.length;e++)o.call(t[e]);return t},this.push=function(o){t[t.length]=o,t.length++},this.eq=function(o){return t[o]},e)for(a=0;a<e.length;a++){var r=o.data(e[a],"__nicescroll")||!1;r&&(this[this.length]=r,this.length++)}return this};!function(o,e,t){for(var r=0;r<e.length;r++)t(o,e[r])}(f.prototype,"show,hide,onResize,resize,remove,stop,doScrollPos".split(","),function(o,e){o[e]=function(){var o=arguments;return this.each(function(){this[e].apply(this,o)})}}),o.fn.getNiceScroll=function(e){return"undefined"==typeof e?new f(this):o.data(this[e],"__nicescroll")||!1},o.extend(o.expr[":"],{nicescroll:function(e){return o.data(e,"__nicescroll")?!0:!1}}),o.fn.niceScroll=function(e,t){"undefined"==typeof t&&"object"==typeof e&&!("jquery"in e)&&(t=e,e=!1);var r=new f;"undefined"==typeof t&&(t={}),e&&(t.doc=o(e),t.win=o(this));var i=!("doc"in t);return i||"win"in t||(t.win=o(this)),this.each(function(){var e=o(this).data("__nicescroll")||!1;e||(t.doc=i?o(this):t.doc,e=new h(t,o(this)),o(this).data("__nicescroll",e)),r.push(e)}),1==r.length?r[0]:r},window.NiceScroll={getjQuery:function(){return o}},o.nicescroll||(o.nicescroll=new f)}(jQuery);


// Sticky Navigation
jQuery.noConflict();
!function(t){var e={topSpacing:0,bottomSpacing:0,className:"is-sticky",wrapperClassName:"sticky-wrapper",center:!1,getWidthFrom:""},n=t(window),i=t(document),a=[],s=n.height(),r=function(){var e,r=jQuery("#header-animate").height(),o=jQuery("#main-menu").height();e=-r;for(var c=n.scrollTop(),p=i.height(),l=p-s,d=c>l?l-c:e,h=0;h<a.length;h++){var m=a[h],u=m.stickyWrapper.offset().top,g=u-m.topSpacing-d;if(g>=c)null!==m.currentTop&&(m.stickyElement.css("position","").css("top","").css("height",""),m.stickyElement.parent().hasClass(m.className)&&m.stickyElement.parent().animate({},{queue:!1,duration:250,easing:"linear",complete:function(){m.stickyElement.parent().removeClass(m.className)}}),m.currentTop=null);else{var y=p-m.stickyElement.outerHeight()-m.topSpacing-m.bottomSpacing-c-d;0>y?y+=m.topSpacing:y=m.topSpacing,m.currentTop!=y&&(m.stickyElement.css("position","fixed").css("top",y).css("height",o),"undefined"!=typeof m.getWidthFrom&&m.stickyElement.css("width",t(m.getWidthFrom).width()),m.stickyElement.parent().addClass(m.className),m.stickyElement.parent().hasClass(m.className)||m.stickyElement.parent().animate({},{queue:!1,duration:250,easing:"linear",complete:function(){m.stickyElement.parent().addClass(m.className)}}),m.currentTop=y)}}},o=function(){s=n.height()},c={init:function(n){var i=t.extend(e,n);return this.each(function(){var e=t(this),n=e.attr("id"),s=t("<div></div>").attr("id",n+"-sticky-wrapper").addClass(i.wrapperClassName);e.wrapAll(s),i.center&&e.parent().css({width:e.outerWidth(),marginLeft:"auto",marginRight:"auto"}),"right"==e.css("float")&&e.css({"float":"none"}).parent().css({"float":"right"});var r=e.parent();r.css("height",e.outerHeight()),a.push({topSpacing:i.topSpacing,bottomSpacing:i.bottomSpacing,stickyElement:e,currentTop:null,stickyWrapper:r,className:i.className,getWidthFrom:i.getWidthFrom})})},update:r};window.addEventListener?(window.addEventListener("scroll",r,!1),window.addEventListener("resize",o,!1)):window.attachEvent&&(window.attachEvent("onscroll",r),window.attachEvent("onresize",o)),t.fn.sticky=function(e){return c[e]?c[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist on jQuery.sticky"):c.init.apply(this,arguments)},t(function(){setTimeout(r,0)})}(jQuery);	


// Isotope
if(mytheme_urls.loadisotope) {
	jQuery.noConflict();
	(function(a,b,c){"use strict";var d=a.document,e=a.Modernizr,f=function(a){return a.charAt(0).toUpperCase()+a.slice(1)},g="Moz Webkit O Ms".split(" "),h=function(a){var b=d.documentElement.style,c;if(typeof b[a]=="string")return a;a=f(a);for(var e=0,h=g.length;e<h;e++){c=g[e]+a;if(typeof b[c]=="string")return c}},i=h("transform"),j=h("transitionProperty"),k={csstransforms:function(){return!!i},csstransforms3d:function(){var a=!!h("perspective");if(a){var c=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),d="@media ("+c.join("transform-3d),(")+"modernizr)",e=b("<style>"+d+"{#modernizr{height:3px}}"+"</style>").appendTo("head"),f=b('<div id="modernizr" />').appendTo("html");a=f.height()===3,f.remove(),e.remove()}return a},csstransitions:function(){return!!j}},l;if(e)for(l in k)e.hasOwnProperty(l)||e.addTest(l,k[l]);else{e=a.Modernizr={_version:"1.6ish: miniModernizr for Isotope"};var m=" ",n;for(l in k)n=k[l](),e[l]=n,m+=" "+(n?"":"no-")+l;b("html").addClass(m)}if(e.csstransforms){var o=e.csstransforms3d?{translate:function(a){return"translate3d("+a[0]+"px, "+a[1]+"px, 0) "},scale:function(a){return"scale3d("+a+", "+a+", 1) "}}:{translate:function(a){return"translate("+a[0]+"px, "+a[1]+"px) "},scale:function(a){return"scale("+a+") "}},p=function(a,c,d){var e=b.data(a,"isoTransform")||{},f={},g,h={},j;f[c]=d,b.extend(e,f);for(g in e)j=e[g],h[g]=o[g](j);var k=h.translate||"",l=h.scale||"",m=k+l;b.data(a,"isoTransform",e),a.style[i]=m};b.cssNumber.scale=!0,b.cssHooks.scale={set:function(a,b){p(a,"scale",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.scale?d.scale:1}},b.fx.step.scale=function(a){b.cssHooks.scale.set(a.elem,a.now+a.unit)},b.cssNumber.translate=!0,b.cssHooks.translate={set:function(a,b){p(a,"translate",b)},get:function(a,c){var d=b.data(a,"isoTransform");return d&&d.translate?d.translate:[0,0]}}}var q,r;e.csstransitions&&(q={WebkitTransitionProperty:"webkitTransitionEnd",MozTransitionProperty:"transitionend",OTransitionProperty:"oTransitionEnd otransitionend",transitionProperty:"transitionend"}[j],r=h("transitionDuration"));var s=b.event,t=b.event.handle?"handle":"dispatch",u;s.special.smartresize={setup:function(){b(this).bind("resize",s.special.smartresize.handler)},teardown:function(){b(this).unbind("resize",s.special.smartresize.handler)},handler:function(a,b){var c=this,d=arguments;a.type="smartresize",u&&clearTimeout(u),u=setTimeout(function(){s[t].apply(c,d)},b==="execAsap"?0:100)}},b.fn.smartresize=function(a){return a?this.bind("smartresize",a):this.trigger("smartresize",["execAsap"])},b.Isotope=function(a,c,d){this.element=b(c),this._create(a),this._init(d)};var v=["width","height"],w=b(a);b.Isotope.settings={resizable:!0,layoutMode:"masonry",containerClass:"isotope",itemClass:"isotope-item",hiddenClass:"isotope-hidden",hiddenStyle:{opacity:0,scale:.001},visibleStyle:{opacity:1,scale:1},containerStyle:{position:"relative",overflow:"hidden"},animationEngine:"best-available",animationOptions:{queue:!1,duration:800},sortBy:"original-order",sortAscending:!0,resizesContainer:!0,transformsEnabled:!0,itemPositionDataEnabled:!1},b.Isotope.prototype={_create:function(a){this.options=b.extend({},b.Isotope.settings,a),this.styleQueue=[],this.elemCount=0;var c=this.element[0].style;this.originalStyle={};var d=v.slice(0);for(var e in this.options.containerStyle)d.push(e);for(var f=0,g=d.length;f<g;f++)e=d[f],this.originalStyle[e]=c[e]||"";this.element.css(this.options.containerStyle),this._updateAnimationEngine(),this._updateUsingTransforms();var h={"original-order":function(a,b){return b.elemCount++,b.elemCount},random:function(){return Math.random()}};this.options.getSortData=b.extend(this.options.getSortData,h),this.reloadItems(),this.offset={left:parseInt(this.element.css("padding-left")||0,10),top:parseInt(this.element.css("padding-top")||0,10)};var i=this;setTimeout(function(){i.element.addClass(i.options.containerClass)},0),this.options.resizable&&w.bind("smartresize.isotope",function(){i.resize()}),this.element.delegate("."+this.options.hiddenClass,"click",function(){return!1})},_getAtoms:function(a){var b=this.options.itemSelector,c=b?a.filter(b).add(a.find(b)):a,d={position:"absolute"};return c=c.filter(function(a,b){return b.nodeType===1}),this.usingTransforms&&(d.left=0,d.top=0),c.css(d).addClass(this.options.itemClass),this.updateSortData(c,!0),c},_init:function(a){this.$filteredAtoms=this._filter(this.$allAtoms),this._sort(),this.reLayout(a)},option:function(a){if(b.isPlainObject(a)){this.options=b.extend(!0,this.options,a);var c;for(var d in a)c="_update"+f(d),this[c]&&this[c]()}},_updateAnimationEngine:function(){var a=this.options.animationEngine.toLowerCase().replace(/[ _\-]/g,""),b;switch(a){case"css":case"none":b=!1;break;case"jquery":b=!0;break;default:b=!e.csstransitions}this.isUsingJQueryAnimation=b,this._updateUsingTransforms()},_updateTransformsEnabled:function(){this._updateUsingTransforms()},_updateUsingTransforms:function(){var a=this.usingTransforms=this.options.transformsEnabled&&e.csstransforms&&e.csstransitions&&!this.isUsingJQueryAnimation;a||(delete this.options.hiddenStyle.scale,delete this.options.visibleStyle.scale),this.getPositionStyles=a?this._translate:this._positionAbs},_filter:function(a){var b=this.options.filter===""?"*":this.options.filter;if(!b)return a;var c=this.options.hiddenClass,d="."+c,e=a.filter(d),f=e;if(b!=="*"){f=e.filter(b);var g=a.not(d).not(b).addClass(c);this.styleQueue.push({$el:g,style:this.options.hiddenStyle})}return this.styleQueue.push({$el:f,style:this.options.visibleStyle}),f.removeClass(c),a.filter(b)},updateSortData:function(a,c){var d=this,e=this.options.getSortData,f,g;a.each(function(){f=b(this),g={};for(var a in e)!c&&a==="original-order"?g[a]=b.data(this,"isotope-sort-data")[a]:g[a]=e[a](f,d);b.data(this,"isotope-sort-data",g)})},_sort:function(){var a=this.options.sortBy,b=this._getSorter,c=this.options.sortAscending?1:-1,d=function(d,e){var f=b(d,a),g=b(e,a);return f===g&&a!=="original-order"&&(f=b(d,"original-order"),g=b(e,"original-order")),(f>g?1:f<g?-1:0)*c};this.$filteredAtoms.sort(d)},_getSorter:function(a,c){return b.data(a,"isotope-sort-data")[c]},_translate:function(a,b){return{translate:[a,b]}},_positionAbs:function(a,b){return{left:a,top:b}},_pushPosition:function(a,b,c){b=Math.round(b+this.offset.left),c=Math.round(c+this.offset.top);var d=this.getPositionStyles(b,c);this.styleQueue.push({$el:a,style:d}),this.options.itemPositionDataEnabled&&a.data("isotope-item-position",{x:b,y:c})},layout:function(a,b){var c=this.options.layoutMode;this["_"+c+"Layout"](a);if(this.options.resizesContainer){var d=this["_"+c+"GetContainerSize"]();this.styleQueue.push({$el:this.element,style:d})}this._processStyleQueue(a,b),this.isLaidOut=!0},_processStyleQueue:function(a,c){var d=this.isLaidOut?this.isUsingJQueryAnimation?"animate":"css":"css",f=this.options.animationOptions,g=this.options.onLayout,h,i,j,k;i=function(a,b){b.$el[d](b.style,f)};if(this._isInserting&&this.isUsingJQueryAnimation)i=function(a,b){h=b.$el.hasClass("no-transition")?"css":d,b.$el[h](b.style,f)};else if(c||g||f.complete){var l=!1,m=[c,g,f.complete],n=this;j=!0,k=function(){if(l)return;var b;for(var c=0,d=m.length;c<d;c++)b=m[c],typeof b=="function"&&b.call(n.element,a,n);l=!0};if(this.isUsingJQueryAnimation&&d==="animate")f.complete=k,j=!1;else if(e.csstransitions){var o=0,p=this.styleQueue[0],s=p&&p.$el,t;while(!s||!s.length){t=this.styleQueue[o++];if(!t)return;s=t.$el}var u=parseFloat(getComputedStyle(s[0])[r]);u>0&&(i=function(a,b){b.$el[d](b.style,f).one(q,k)},j=!1)}}b.each(this.styleQueue,i),j&&k(),this.styleQueue=[]},resize:function(){this["_"+this.options.layoutMode+"ResizeChanged"]()&&this.reLayout()},reLayout:function(a){this["_"+this.options.layoutMode+"Reset"](),this.layout(this.$filteredAtoms,a)},addItems:function(a,b){var c=this._getAtoms(a);this.$allAtoms=this.$allAtoms.add(c),b&&b(c)},insert:function(a,b){this.element.append(a);var c=this;this.addItems(a,function(a){var d=c._filter(a);c._addHideAppended(d),c._sort(),c.reLayout(),c._revealAppended(d,b)})},appended:function(a,b){var c=this;this.addItems(a,function(a){c._addHideAppended(a),c.layout(a),c._revealAppended(a,b)})},_addHideAppended:function(a){this.$filteredAtoms=this.$filteredAtoms.add(a),a.addClass("no-transition"),this._isInserting=!0,this.styleQueue.push({$el:a,style:this.options.hiddenStyle})},_revealAppended:function(a,b){var c=this;setTimeout(function(){a.removeClass("no-transition"),c.styleQueue.push({$el:a,style:c.options.visibleStyle}),c._isInserting=!1,c._processStyleQueue(a,b)},10)},reloadItems:function(){this.$allAtoms=this._getAtoms(this.element.children())},remove:function(a,b){this.$allAtoms=this.$allAtoms.not(a),this.$filteredAtoms=this.$filteredAtoms.not(a);var c=this,d=function(){a.remove(),b&&b.call(c.element)};a.filter(":not(."+this.options.hiddenClass+")").length?(this.styleQueue.push({$el:a,style:this.options.hiddenStyle}),this._sort(),this.reLayout(d)):d()},shuffle:function(a){this.updateSortData(this.$allAtoms),this.options.sortBy="random",this._sort(),this.reLayout(a)},destroy:function(){var a=this.usingTransforms,b=this.options;this.$allAtoms.removeClass(b.hiddenClass+" "+b.itemClass).each(function(){var b=this.style;b.position="",b.top="",b.left="",b.opacity="",a&&(b[i]="")});var c=this.element[0].style;for(var d in this.originalStyle)c[d]=this.originalStyle[d];this.element.unbind(".isotope").undelegate("."+b.hiddenClass,"click").removeClass(b.containerClass).removeData("isotope"),w.unbind(".isotope")},_getSegments:function(a){var b=this.options.layoutMode,c=a?"rowHeight":"columnWidth",d=a?"height":"width",e=a?"rows":"cols",g=this.element[d](),h,i=this.options[b]&&this.options[b][c]||this.$filteredAtoms["outer"+f(d)](!0)||g;h=Math.floor(g/i),h=Math.max(h,1),this[b][e]=h,this[b][c]=i},_checkIfSegmentsChanged:function(a){var b=this.options.layoutMode,c=a?"rows":"cols",d=this[b][c];return this._getSegments(a),this[b][c]!==d},_masonryReset:function(){this.masonry={},this._getSegments();var a=this.masonry.cols;this.masonry.colYs=[];while(a--)this.masonry.colYs.push(0)},_masonryLayout:function(a){var c=this,d=c.masonry;a.each(function(){var a=b(this),e=Math.ceil(a.outerWidth(!0)/d.columnWidth);e=Math.min(e,d.cols);if(e===1)c._masonryPlaceBrick(a,d.colYs);else{var f=d.cols+1-e,g=[],h,i;for(i=0;i<f;i++)h=d.colYs.slice(i,i+e),g[i]=Math.max.apply(Math,h);c._masonryPlaceBrick(a,g)}})},_masonryPlaceBrick:function(a,b){var c=Math.min.apply(Math,b),d=0;for(var e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=this.masonry.columnWidth*d,h=c;this._pushPosition(a,g,h);var i=c+a.outerHeight(!0),j=this.masonry.cols+1-f;for(e=0;e<j;e++)this.masonry.colYs[d+e]=i},_masonryGetContainerSize:function(){var a=Math.max.apply(Math,this.masonry.colYs);return{height:a}},_masonryResizeChanged:function(){return this._checkIfSegmentsChanged()},_fitRowsReset:function(){this.fitRows={x:0,y:0,height:0}},_fitRowsLayout:function(a){var c=this,d=this.element.width(),e=this.fitRows;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);e.x!==0&&f+e.x>d&&(e.x=0,e.y=e.height),c._pushPosition(a,e.x,e.y),e.height=Math.max(e.y+g,e.height),e.x+=f})},_fitRowsGetContainerSize:function(){return{height:this.fitRows.height}},_fitRowsResizeChanged:function(){return!0},_cellsByRowReset:function(){this.cellsByRow={index:0},this._getSegments(),this._getSegments(!0)},_cellsByRowLayout:function(a){var c=this,d=this.cellsByRow;a.each(function(){var a=b(this),e=d.index%d.cols,f=Math.floor(d.index/d.cols),g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByRowGetContainerSize:function(){return{height:Math.ceil(this.$filteredAtoms.length/this.cellsByRow.cols)*this.cellsByRow.rowHeight+this.offset.top}},_cellsByRowResizeChanged:function(){return this._checkIfSegmentsChanged()},_straightDownReset:function(){this.straightDown={y:0}},_straightDownLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,0,c.straightDown.y),c.straightDown.y+=d.outerHeight(!0)})},_straightDownGetContainerSize:function(){return{height:this.straightDown.y}},_straightDownResizeChanged:function(){return!0},_masonryHorizontalReset:function(){this.masonryHorizontal={},this._getSegments(!0);var a=this.masonryHorizontal.rows;this.masonryHorizontal.rowXs=[];while(a--)this.masonryHorizontal.rowXs.push(0)},_masonryHorizontalLayout:function(a){var c=this,d=c.masonryHorizontal;a.each(function(){var a=b(this),e=Math.ceil(a.outerHeight(!0)/d.rowHeight);e=Math.min(e,d.rows);if(e===1)c._masonryHorizontalPlaceBrick(a,d.rowXs);else{var f=d.rows+1-e,g=[],h,i;for(i=0;i<f;i++)h=d.rowXs.slice(i,i+e),g[i]=Math.max.apply(Math,h);c._masonryHorizontalPlaceBrick(a,g)}})},_masonryHorizontalPlaceBrick:function(a,b){var c=Math.min.apply(Math,b),d=0;for(var e=0,f=b.length;e<f;e++)if(b[e]===c){d=e;break}var g=c,h=this.masonryHorizontal.rowHeight*d;this._pushPosition(a,g,h);var i=c+a.outerWidth(!0),j=this.masonryHorizontal.rows+1-f;for(e=0;e<j;e++)this.masonryHorizontal.rowXs[d+e]=i},_masonryHorizontalGetContainerSize:function(){var a=Math.max.apply(Math,this.masonryHorizontal.rowXs);return{width:a}},_masonryHorizontalResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_fitColumnsReset:function(){this.fitColumns={x:0,y:0,width:0}},_fitColumnsLayout:function(a){var c=this,d=this.element.height(),e=this.fitColumns;a.each(function(){var a=b(this),f=a.outerWidth(!0),g=a.outerHeight(!0);e.y!==0&&g+e.y>d&&(e.x=e.width,e.y=0),c._pushPosition(a,e.x,e.y),e.width=Math.max(e.x+f,e.width),e.y+=g})},_fitColumnsGetContainerSize:function(){return{width:this.fitColumns.width}},_fitColumnsResizeChanged:function(){return!0},_cellsByColumnReset:function(){this.cellsByColumn={index:0},this._getSegments(),this._getSegments(!0)},_cellsByColumnLayout:function(a){var c=this,d=this.cellsByColumn;a.each(function(){var a=b(this),e=Math.floor(d.index/d.rows),f=d.index%d.rows,g=(e+.5)*d.columnWidth-a.outerWidth(!0)/2,h=(f+.5)*d.rowHeight-a.outerHeight(!0)/2;c._pushPosition(a,g,h),d.index++})},_cellsByColumnGetContainerSize:function(){return{width:Math.ceil(this.$filteredAtoms.length/this.cellsByColumn.rows)*this.cellsByColumn.columnWidth}},_cellsByColumnResizeChanged:function(){return this._checkIfSegmentsChanged(!0)},_straightAcrossReset:function(){this.straightAcross={x:0}},_straightAcrossLayout:function(a){var c=this;a.each(function(a){var d=b(this);c._pushPosition(d,c.straightAcross.x,0),c.straightAcross.x+=d.outerWidth(!0)})},_straightAcrossGetContainerSize:function(){return{width:this.straightAcross.x}},_straightAcrossResizeChanged:function(){return!0}},b.fn.imagesLoaded=function(a){function h(){a.call(c,d)}function i(a){var c=a.target;c.src!==f&&b.inArray(c,g)===-1&&(g.push(c),--e<=0&&(setTimeout(h),d.unbind(".imagesLoaded",i)))}var c=this,d=c.find("img").add(c.filter("img")),e=d.length,f="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",g=[];return e||h(),d.bind("load.imagesLoaded error.imagesLoaded",i).each(function(){var a=this.src;this.src=f,this.src=a}),c};var x=function(b){a.console&&a.console.error(b)};b.fn.isotope=function(a,c){if(typeof a=="string"){var d=Array.prototype.slice.call(arguments,1);this.each(function(){var c=b.data(this,"isotope");if(!c){x("cannot call methods on isotope prior to initialization; attempted to call method '"+a+"'");return}if(!b.isFunction(c[a])||a.charAt(0)==="_"){x("no such method '"+a+"' for isotope instance");return}c[a].apply(c,d)})}else this.each(function(){var d=b.data(this,"isotope");d?(d.option(a),d._init(c)):b.data(this,"isotope",new b.Isotope(a,this,c))});return this}})(window,jQuery);

	jQuery.Isotope.prototype._getMasonryGutterColumns=function(){var gutter=this.options.masonry&&this.options.masonry.gutterWidth||0;containerWidth=this.element.width();this.masonry.columnWidth=this.options.masonry&&this.options.masonry.columnWidth||this.$filteredAtoms.outerWidth(true)||containerWidth;this.masonry.columnWidth+=gutter;this.masonry.cols=Math.floor((containerWidth+gutter)/this.masonry.columnWidth);this.masonry.cols=Math.max(this.masonry.cols,1)};
	jQuery.Isotope.prototype._masonryReset=function(){this.masonry={};this._getMasonryGutterColumns();var i=this.masonry.cols;this.masonry.colYs=[];while(i--)this.masonry.colYs.push(0)};jQuery.Isotope.prototype._masonryResizeChanged=function(){var prevSegments=this.masonry.cols;this._getMasonryGutterColumns();return this.masonry.cols!==prevSegments};
}


// Fitvids
jQuery.noConflict();
!function(t){"use strict";t.fn.fitVids=function(e){var i={customSelector:null},r=document.createElement("div"),a=document.getElementsByTagName("base")[0]||document.getElementsByTagName("script")[0];return r.className="fit-vids-style",r.innerHTML="&shy;<style>               .fluid-width-video-wrapper {                 width: 100%;                              position: relative;                       padding: 0;                            }                                                                                   .fluid-width-video-wrapper iframe,        .fluid-width-video-wrapper object,        .fluid-width-video-wrapper embed {           position: absolute;                       top: 0;                                   left: 0;                                  width: 100%;                              height: 100%;                          }                                       </style>",a.parentNode.insertBefore(r,a),e&&t.extend(i,e),this.each(function(){var e=["iframe[src*='player.vimeo.com']","iframe[src*='www.youtube.com']","iframe[src*='www.kickstarter.com']","object","embed"];i.customSelector&&e.push(i.customSelector);var r=t(this).find(e.join(","));r.each(function(){var e=t(this);if(!("embed"===this.tagName.toLowerCase()&&e.parent("object").length||e.parent(".fluid-width-video-wrapper").length)){var i="object"===this.tagName.toLowerCase()||e.attr("height")&&!isNaN(parseInt(e.attr("height"),10))?parseInt(e.attr("height"),10):e.height(),r=isNaN(parseInt(e.attr("width"),10))?e.width():parseInt(e.attr("width"),10),a=i/r;if(!e.attr("id")){var d="fitvid"+Math.floor(999999*Math.random());e.attr("id",d)}e.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*a+"%"),e.removeAttr("height").removeAttr("width")}})})}}(jQuery);


// Box Slider
jQuery.noConflict();
!function(t){var e={},s={mode:"horizontal",slideSelector:"",infiniteLoop:!0,hideControlOnEnd:!1,speed:500,easing:null,slideMargin:0,startSlide:0,randomStart:!1,captions:!1,ticker:!1,tickerHover:!1,adaptiveHeight:!1,adaptiveHeightSpeed:500,video:!1,useCSS:!0,preloadImages:"visible",responsive:!0,touchEnabled:!0,swipeThreshold:50,oneToOneTouch:!0,preventDefaultSwipeX:!0,preventDefaultSwipeY:!1,pager:!0,pagerType:"full",pagerShortSeparator:" / ",pagerSelector:null,buildPager:null,pagerCustom:null,controls:!0,nextText:"Next",prevText:"Prev",nextSelector:null,prevSelector:null,autoControls:!1,startText:"Start",stopText:"Stop",autoControlsCombine:!1,autoControlsSelector:null,auto:!1,pause:4e3,autoStart:!0,autoDirection:"next",autoHover:!1,autoDelay:0,minSlides:1,maxSlides:1,moveSlides:0,slideWidth:0,onSliderLoad:function(){},onSlideBefore:function(){},onSlideAfter:function(){},onSlideNext:function(){},onSlidePrev:function(){}};t.fn.bxSlider=function(n){if(0==this.length)return this;if(this.length>1)return this.each(function(){t(this).bxSlider(n)}),this;var o={},r=this;e.el=this;var a=t(window).width(),l=t(window).height(),d=function(){o.settings=t.extend({},s,n),o.settings.slideWidth=parseInt(o.settings.slideWidth),o.children=r.children(o.settings.slideSelector),o.children.length<o.settings.minSlides&&(o.settings.minSlides=o.children.length),o.children.length<o.settings.maxSlides&&(o.settings.maxSlides=o.children.length),o.settings.randomStart&&(o.settings.startSlide=Math.floor(Math.random()*o.children.length)),o.active={index:o.settings.startSlide},o.carousel=o.settings.minSlides>1||o.settings.maxSlides>1,o.carousel&&(o.settings.preloadImages="all"),o.minThreshold=o.settings.minSlides*o.settings.slideWidth+(o.settings.minSlides-1)*o.settings.slideMargin,o.maxThreshold=o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin,o.working=!1,o.controls={},o.interval=null,o.animProp="vertical"==o.settings.mode?"top":"left",o.usingCSS=o.settings.useCSS&&"fade"!=o.settings.mode&&function(){var t=document.createElement("div"),e=["WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in e)if(void 0!==t.style[e[i]])return o.cssPrefix=e[i].replace("Perspective","").toLowerCase(),o.animProp="-"+o.cssPrefix+"-transform",!0;return!1}(),"vertical"==o.settings.mode&&(o.settings.maxSlides=o.settings.minSlides),r.data("origStyle",r.attr("style")),r.children(o.settings.slideSelector).each(function(){t(this).data("origStyle",t(this).attr("style"))}),c()},c=function(){r.wrap('<div class="bx-wrapper"><div class="bx-viewport"></div></div>'),o.viewport=r.parent(),o.loader=t('<div class="bx-loading" />'),o.viewport.prepend(o.loader),r.css({width:"horizontal"==o.settings.mode?100*o.children.length+215+"%":"auto",position:"relative"}),o.usingCSS&&o.settings.easing?r.css("-"+o.cssPrefix+"-transition-timing-function",o.settings.easing):o.settings.easing||(o.settings.easing="swing");f();o.viewport.css({width:"100%",overflow:"hidden",position:"relative"}),o.viewport.parent().css({maxWidth:p()}),o.settings.pager||o.viewport.parent().css({margin:"0 auto 0px"}),o.children.css({"float":"horizontal"==o.settings.mode?"left":"none",listStyle:"none",position:"relative"}),o.children.css("width",u()),"horizontal"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginRight",o.settings.slideMargin),"vertical"==o.settings.mode&&o.settings.slideMargin>0&&o.children.css("marginBottom",o.settings.slideMargin),"fade"==o.settings.mode&&(o.children.css({position:"absolute",zIndex:0,display:"none"}),o.children.eq(o.settings.startSlide).css({zIndex:50,display:"block"})),o.controls.el=t('<div class="bx-controls" />'),o.settings.captions&&P(),o.active.last=o.settings.startSlide==x()-1,o.settings.video&&r.fitVids();var e=o.children.eq(o.settings.startSlide);"all"==o.settings.preloadImages&&(e=o.children),o.settings.ticker?o.settings.pager=!1:(o.settings.pager&&T(),o.settings.controls&&C(),o.settings.auto&&o.settings.autoControls&&E(),(o.settings.controls||o.settings.autoControls||o.settings.pager)&&o.viewport.after(o.controls.el)),g(e,h)},g=function(e,i){var s=e.find("img, iframe").length;if(0==s)return void i();var n=0;e.find("img, iframe").each(function(){t(this).is("img")&&t(this).attr("src",t(this).attr("src")+"?timestamp="+(new Date).getTime()),t(this).load(function(){setTimeout(function(){++n==s&&i()},0)})})},h=function(){if(o.settings.infiniteLoop&&"fade"!=o.settings.mode&&!o.settings.ticker){var e="vertical"==o.settings.mode?o.settings.minSlides:o.settings.maxSlides,i=o.children.slice(0,e).clone().addClass("bx-clone"),s=o.children.slice(-e).clone().addClass("bx-clone");r.append(i).prepend(s)}o.loader.remove(),S(),"vertical"==o.settings.mode&&(o.settings.adaptiveHeight=!0),o.viewport.height(v()),r.redrawSlider(),o.settings.onSliderLoad(o.active.index),o.initialized=!0,o.settings.responsive&&t(window).bind("resize",B),o.settings.auto&&o.settings.autoStart&&H(),o.settings.ticker&&L(),o.settings.pager&&I(o.settings.startSlide),o.settings.controls&&W(),o.settings.touchEnabled&&!o.settings.ticker&&O()},v=function(){var e=0,s=t();if("vertical"==o.settings.mode||o.settings.adaptiveHeight)if(o.carousel){var n=1==o.settings.moveSlides?o.active.index:o.active.index*m();for(s=o.children.eq(n),i=1;i<=o.settings.maxSlides-1;i++)s=n+i>=o.children.length?s.add(o.children.eq(i-1)):s.add(o.children.eq(n+i))}else s=o.children.eq(o.active.index);else s=o.children;return"vertical"==o.settings.mode?(s.each(function(i){e+=t(this).outerHeight()}),o.settings.slideMargin>0&&(e+=o.settings.slideMargin*(o.settings.minSlides-1))):e=Math.max.apply(Math,s.map(function(){return t(this).outerHeight(!1)}).get()),e},p=function(){var t="100%";return o.settings.slideWidth>0&&(t="horizontal"==o.settings.mode?o.settings.maxSlides*o.settings.slideWidth+(o.settings.maxSlides-1)*o.settings.slideMargin:o.settings.slideWidth),t},u=function(){var t=o.settings.slideWidth,e=o.viewport.width();return 0==o.settings.slideWidth||o.settings.slideWidth>e&&!o.carousel||"vertical"==o.settings.mode?t=e:o.settings.maxSlides>1&&"horizontal"==o.settings.mode&&(e>o.maxThreshold||e<o.minThreshold&&(t=(e-o.settings.slideMargin*(o.settings.minSlides-1))/o.settings.minSlides)),t},f=function(){var t=1;if("horizontal"==o.settings.mode&&o.settings.slideWidth>0)if(o.viewport.width()<o.minThreshold)t=o.settings.minSlides;else if(o.viewport.width()>o.maxThreshold)t=o.settings.maxSlides;else{var e=o.children.first().width();t=Math.floor(o.viewport.width()/e)}else"vertical"==o.settings.mode&&(t=o.settings.minSlides);return t},x=function(){var t=0;if(o.settings.moveSlides>0)if(o.settings.infiniteLoop)t=o.children.length/m();else for(var e=0,i=0;e<o.children.length;)++t,e=i+f(),i+=o.settings.moveSlides<=f()?o.settings.moveSlides:f();else t=Math.ceil(o.children.length/f());return t},m=function(){return o.settings.moveSlides>0&&o.settings.moveSlides<=f()?o.settings.moveSlides:f()},S=function(){if(o.children.length>o.settings.maxSlides&&o.active.last&&!o.settings.infiniteLoop){if("horizontal"==o.settings.mode){var t=o.children.last(),e=t.position();b(-(e.left-(o.viewport.width()-t.width())),"reset",0)}else if("vertical"==o.settings.mode){var i=o.children.length-o.settings.minSlides,e=o.children.eq(i).position();b(-e.top,"reset",0)}}else{var e=o.children.eq(o.active.index*m()).position();o.active.index==x()-1&&(o.active.last=!0),void 0!=e&&("horizontal"==o.settings.mode?b(-e.left,"reset",0):"vertical"==o.settings.mode&&b(-e.top,"reset",0))}},b=function(t,e,i,s){if(o.usingCSS){var n="vertical"==o.settings.mode?"translate3d(0, "+t+"px, 0)":"translate3d("+t+"px, 0, 0)";r.css("-"+o.cssPrefix+"-transition-duration",i/1e3+"s"),"slide"==e?(r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),D()})):"reset"==e?r.css(o.animProp,n):"ticker"==e&&(r.css("-"+o.cssPrefix+"-transition-timing-function","linear"),r.css(o.animProp,n),r.bind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){r.unbind("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd"),b(s.resetValue,"reset",0),N()}))}else{var a={};a[o.animProp]=t,"slide"==e?r.animate(a,i,o.settings.easing,function(){D()}):"reset"==e?r.css(o.animProp,t):"ticker"==e&&r.animate(a,speed,"linear",function(){b(s.resetValue,"reset",0),N()})}},w=function(){for(var e="",i=x(),s=0;i>s;s++){var n="";o.settings.buildPager&&t.isFunction(o.settings.buildPager)?(n=o.settings.buildPager(s),o.pagerEl.addClass("bx-custom-pager")):(n=s+1,o.pagerEl.addClass("bx-default-pager")),e+='<div class="bx-pager-item"><a href="" data-slide-index="'+s+'" class="bx-pager-link">'+n+"</a></div>"}o.pagerEl.html(e)},T=function(){o.settings.pagerCustom?o.pagerEl=t(o.settings.pagerCustom):(o.pagerEl=t('<div class="bx-pager" />'),o.settings.pagerSelector?t(o.settings.pagerSelector).html(o.pagerEl):o.controls.el.addClass("bx-has-pager").append(o.pagerEl),w()),o.pagerEl.delegate("a","click",q)},C=function(){o.controls.next=t('<a class="bx-next" href="">'+o.settings.nextText+"</a>"),o.controls.prev=t('<a class="bx-prev" href="">'+o.settings.prevText+"</a>"),o.controls.next.bind("click",y),o.controls.prev.bind("click",z),o.settings.nextSelector&&t(o.settings.nextSelector).append(o.controls.next),o.settings.prevSelector&&t(o.settings.prevSelector).append(o.controls.prev),o.settings.nextSelector||o.settings.prevSelector||(o.controls.directionEl=t('<div class="bx-controls-direction" />'),o.controls.directionEl.append(o.controls.prev).append(o.controls.next),o.controls.el.addClass("bx-has-controls-direction").append(o.controls.directionEl))},E=function(){o.controls.start=t('<div class="bx-controls-auto-item"><a class="bx-start" href="">'+o.settings.startText+"</a></div>"),o.controls.stop=t('<div class="bx-controls-auto-item"><a class="bx-stop" href="">'+o.settings.stopText+"</a></div>"),o.controls.autoEl=t('<div class="bx-controls-auto" />'),o.controls.autoEl.delegate(".bx-start","click",k),o.controls.autoEl.delegate(".bx-stop","click",M),o.settings.autoControlsCombine?o.controls.autoEl.append(o.controls.start):o.controls.autoEl.append(o.controls.start).append(o.controls.stop),o.settings.autoControlsSelector?t(o.settings.autoControlsSelector).html(o.controls.autoEl):o.controls.el.addClass("bx-has-controls-auto").append(o.controls.autoEl),A(o.settings.autoStart?"stop":"start")},P=function(){o.children.each(function(e){var i=t(this).find("img:first").attr("title");void 0!=i&&(""+i).length&&t(this).append('<div class="bx-caption"><span>'+i+"</span></div>")})},y=function(t){o.settings.auto&&r.stopAuto(),r.goToNextSlide(),t.preventDefault()},z=function(t){o.settings.auto&&r.stopAuto(),r.goToPrevSlide(),t.preventDefault()},k=function(t){r.startAuto(),t.preventDefault()},M=function(t){r.stopAuto(),t.preventDefault()},q=function(e){o.settings.auto&&r.stopAuto();var i=t(e.currentTarget),s=parseInt(i.attr("data-slide-index"));s!=o.active.index&&r.goToSlide(s),e.preventDefault()},I=function(e){var i=o.children.length;return"short"==o.settings.pagerType?(o.settings.maxSlides>1&&(i=Math.ceil(o.children.length/o.settings.maxSlides)),void o.pagerEl.html(e+1+o.settings.pagerShortSeparator+i)):(o.pagerEl.find("a").removeClass("active"),void o.pagerEl.each(function(i,s){t(s).find("a").eq(e).addClass("active")}))},D=function(){if(o.settings.infiniteLoop){var t="";0==o.active.index?t=o.children.eq(0).position():o.active.index==x()-1&&o.carousel?t=o.children.eq((x()-1)*m()).position():o.active.index==o.children.length-1&&(t=o.children.eq(o.children.length-1).position()),"horizontal"==o.settings.mode?b(-t.left,"reset",0):"vertical"==o.settings.mode&&b(-t.top,"reset",0)}o.working=!1,o.settings.onSlideAfter(o.children.eq(o.active.index),o.oldIndex,o.active.index)},A=function(t){o.settings.autoControlsCombine?o.controls.autoEl.html(o.controls[t]):(o.controls.autoEl.find("a").removeClass("active"),o.controls.autoEl.find("a:not(.bx-"+t+")").addClass("active"))},W=function(){1==x()?(o.controls.prev.addClass("disabled"),o.controls.next.addClass("disabled")):!o.settings.infiniteLoop&&o.settings.hideControlOnEnd&&(0==o.active.index?(o.controls.prev.addClass("disabled"),o.controls.next.removeClass("disabled")):o.active.index==x()-1?(o.controls.next.addClass("disabled"),o.controls.prev.removeClass("disabled")):(o.controls.prev.removeClass("disabled"),o.controls.next.removeClass("disabled")))},H=function(){if(o.settings.autoDelay>0){setTimeout(r.startAuto,o.settings.autoDelay)}else r.startAuto();o.settings.autoHover&&r.hover(function(){o.interval&&(r.stopAuto(!0),o.autoPaused=!0)},function(){o.autoPaused&&(r.startAuto(!0),o.autoPaused=null)})},L=function(){var e=0;if("next"==o.settings.autoDirection)r.append(o.children.clone().addClass("bx-clone"));else{r.prepend(o.children.clone().addClass("bx-clone"));var i=o.children.first().position();e="horizontal"==o.settings.mode?-i.left:-i.top}b(e,"reset",0),o.settings.pager=!1,o.settings.controls=!1,o.settings.autoControls=!1,o.settings.tickerHover&&!o.usingCSS&&o.viewport.hover(function(){r.stop()},function(){var e=0;o.children.each(function(i){e+="horizontal"==o.settings.mode?t(this).outerWidth(!0):t(this).outerHeight(!0)});var i=o.settings.speed/e,s="horizontal"==o.settings.mode?"left":"top",n=i*(e-Math.abs(parseInt(r.css(s))));N(n)}),N()},N=function(t){speed=t?t:o.settings.speed;var e={left:0,top:0},i={left:0,top:0};"next"==o.settings.autoDirection?e=r.find(".bx-clone").first().position():i=o.children.first().position();var s="horizontal"==o.settings.mode?-e.left:-e.top,n="horizontal"==o.settings.mode?-i.left:-i.top,a={resetValue:n};b(s,"ticker",speed,a)},O=function(){o.touch={start:{x:0,y:0},end:{x:0,y:0}},o.viewport.bind("touchstart",X)},X=function(t){if(o.working)t.preventDefault();else{o.touch.originalPos=r.position();var e=t.originalEvent;o.touch.start.x=e.changedTouches[0].pageX,o.touch.start.y=e.changedTouches[0].pageY,o.viewport.bind("touchmove",Y),o.viewport.bind("touchend",V)}},Y=function(t){var e=t.originalEvent,i=Math.abs(e.changedTouches[0].pageX-o.touch.start.x),s=Math.abs(e.changedTouches[0].pageY-o.touch.start.y);if(3*i>s&&o.settings.preventDefaultSwipeX?t.preventDefault():3*s>i&&o.settings.preventDefaultSwipeY&&t.preventDefault(),"fade"!=o.settings.mode&&o.settings.oneToOneTouch){var n=0;if("horizontal"==o.settings.mode){var r=e.changedTouches[0].pageX-o.touch.start.x;n=o.touch.originalPos.left+r}else{var r=e.changedTouches[0].pageY-o.touch.start.y;n=o.touch.originalPos.top+r}b(n,"reset",0)}},V=function(t){o.viewport.unbind("touchmove",Y);var e=t.originalEvent,i=0;if(o.touch.end.x=e.changedTouches[0].pageX,o.touch.end.y=e.changedTouches[0].pageY,"fade"==o.settings.mode){var s=Math.abs(o.touch.start.x-o.touch.end.x);s>=o.settings.swipeThreshold&&(o.touch.start.x>o.touch.end.x?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto())}else{var s=0;"horizontal"==o.settings.mode?(s=o.touch.end.x-o.touch.start.x,i=o.touch.originalPos.left):(s=o.touch.end.y-o.touch.start.y,i=o.touch.originalPos.top),!o.settings.infiniteLoop&&(0==o.active.index&&s>0||o.active.last&&0>s)?b(i,"reset",200):Math.abs(s)>=o.settings.swipeThreshold?(0>s?r.goToNextSlide():r.goToPrevSlide(),r.stopAuto()):b(i,"reset",200)}o.viewport.unbind("touchend",V)},B=function(e){var i=t(window).width(),s=t(window).height();(a!=i||l!=s)&&(a=i,l=s,r.redrawSlider())};return r.goToSlide=function(e,i){if(!o.working&&o.active.index!=e)if(o.working=!0,o.oldIndex=o.active.index,0>e?o.active.index=x()-1:e>=x()?o.active.index=0:o.active.index=e,o.settings.onSlideBefore(o.children.eq(o.active.index),o.oldIndex,o.active.index),"next"==i?o.settings.onSlideNext(o.children.eq(o.active.index),o.oldIndex,o.active.index):"prev"==i&&o.settings.onSlidePrev(o.children.eq(o.active.index),o.oldIndex,o.active.index),o.active.last=o.active.index>=x()-1,o.settings.pager&&I(o.active.index),o.settings.controls&&W(),"fade"==o.settings.mode)o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},o.settings.adaptiveHeightSpeed),o.children.filter(":visible").fadeOut(o.settings.speed).css({zIndex:0}),o.children.eq(o.active.index).css("zIndex",51).fadeIn(o.settings.speed,function(){t(this).css("zIndex",50),D()});else{o.settings.adaptiveHeight&&o.viewport.height()!=v()&&o.viewport.animate({height:v()},o.settings.adaptiveHeightSpeed);var s=0,n={left:0,top:0};if(!o.settings.infiniteLoop&&o.carousel&&o.active.last)if("horizontal"==o.settings.mode){var a=o.children.eq(o.children.length-1);n=a.position(),s=o.viewport.width()-a.outerWidth()}else{var l=o.children.length-o.settings.minSlides;n=o.children.eq(l).position()}else if(o.carousel&&o.active.last&&"prev"==i){var d=1==o.settings.moveSlides?o.settings.maxSlides-m():(x()-1)*m()-(o.children.length-o.settings.maxSlides),a=r.children(".bx-clone").eq(d);n=a.position()}else if("next"==i&&0==o.active.index)n=r.find("> .bx-clone").eq(o.settings.maxSlides).position(),o.active.last=!1;else if(e>=0){var c=e*m();n=o.children.eq(c).position()}if("undefined"!=typeof n){var g="horizontal"==o.settings.mode?-(n.left-s):-n.top;b(g,"slide",o.settings.speed)}}},r.goToNextSlide=function(){if(o.settings.infiniteLoop||!o.active.last){var t=parseInt(o.active.index)+1;r.goToSlide(t,"next")}},r.goToPrevSlide=function(){if(o.settings.infiniteLoop||0!=o.active.index){var t=parseInt(o.active.index)-1;r.goToSlide(t,"prev")}},r.startAuto=function(t){o.interval||(o.interval=setInterval(function(){"next"==o.settings.autoDirection?r.goToNextSlide():r.goToPrevSlide()},o.settings.pause),o.settings.autoControls&&1!=t&&A("stop"))},r.stopAuto=function(t){o.interval&&(clearInterval(o.interval),o.interval=null,o.settings.autoControls&&1!=t&&A("start"))},r.getCurrentSlide=function(){return o.active.index},r.getSlideCount=function(){return o.children.length},r.redrawSlider=function(){o.children.add(r.find(".bx-clone")).outerWidth(u()),o.viewport.css("height",v()),o.settings.ticker||S(),o.active.last&&(o.active.index=x()-1),o.active.index>=x()&&(o.active.last=!0),o.settings.pager&&!o.settings.pagerCustom&&(w(),I(o.active.index))},r.destroySlider=function(){o.initialized&&(o.initialized=!1,t(".bx-clone",this).remove(),o.children.each(function(){void 0!=t(this).data("origStyle")?t(this).attr("style",t(this).data("origStyle")):t(this).removeAttr("style")}),void 0!=t(this).data("origStyle")?this.attr("style",t(this).data("origStyle")):t(this).removeAttr("style"),t(this).unwrap().unwrap(),o.controls.el&&o.controls.el.remove(),o.controls.next&&o.controls.next.remove(),o.controls.prev&&o.controls.prev.remove(),o.pagerEl&&o.pagerEl.remove(),t(".bx-caption",this).remove(),o.controls.autoEl&&o.controls.autoEl.remove(),clearInterval(o.interval),o.settings.responsive&&t(window).unbind("resize",B))},r.reloadSlider=function(t){void 0!=t&&(n=t),r.destroySlider(),d()},d(),this}}(jQuery);


// Tocuh Effects
jQuery.noConflict();
!function(e){function t(e){return new RegExp("(^|\\s+)"+e+"(\\s+|$)")}function n(e,t){var n=s(e,t)?o:a;n(e,t)}if(Modernizr.touch){var s,a,o;"classList"in document.documentElement?(s=function(e,t){return e.classList.contains(t)},a=function(e,t){e.classList.add(t)},o=function(e,t){e.classList.remove(t)}):(s=function(e,n){return t(n).test(e.className)},a=function(e,t){s(e,t)||(e.className=e.className+" "+t)},o=function(e,n){e.className=e.className.replace(t(n)," ")});var c={hasClass:s,addClass:a,removeClass:o,toggleClass:n,has:s,add:a,remove:o,toggle:n};"function"==typeof define&&define.amd?define(c):e.classie=c,[].slice.call(document.querySelectorAll(".portfolio > figure")).forEach(function(e,t){e.querySelector("figcaption a").addEventListener("touchstart",function(e){e.stopPropagation()},!1),e.addEventListener("touchstart",function(e){c.toggle(this,"cs-hover")},!1)})}}(window);


// Table Sorter
jQuery.noConflict();
(function($){$.extend({tablesorter:new
function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:true,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:'/\.|\,/g',onRenderHeader:null,selectorHeaders:'thead th',debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms");}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s);}else{alert(s);}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug="";}if(table.tBodies.length==0)return;var rows=table.tBodies[0].rows;if(rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter);}else if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter);}if(!p){p=detectParserForColumn(table,rows,-1,i);}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n";}list.push(p);}}if(table.config.debug){log(parsersDebug);}return list;};function detectParserForColumn(table,rows,rowIndex,cellIndex){var l=parsers.length,node=false,nodeValue=false,keepLooking=true;while(nodeValue==''&&keepLooking){rowIndex++;if(rows[rowIndex]){node=getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex);nodeValue=trimAndGetNodeText(table.config,node);if(table.config.debug){log('Checking if value was empty on row:'+rowIndex);}}else{keepLooking=false;}}for(var i=1;i<l;i++){if(parsers[i].is(nodeValue,table,node)){return parsers[i];}}return parsers[0];}function getNodeFromRowAndCellIndex(rows,rowIndex,cellIndex){return rows[rowIndex].cells[cellIndex];}function trimAndGetNodeText(config,node){return $.trim(getElementText(config,node));}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i];}}return false;}function buildCache(table){if(table.config.debug){var cacheTime=new Date();}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=$(table.tBodies[0].rows[i]),cols=[];if(c.hasClass(table.config.cssChildRow)){cache.row[cache.row.length-1]=cache.row[cache.row.length-1].add(c);continue;}cache.row.push(c);for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c[0].cells[j]),table,c[0].cells[j]));}cols.push(cache.normalized.length);cache.normalized.push(cols);cols=null;};if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime);}return cache;};function getElementText(config,node){var text="";if(!node)return"";if(!config.supportsTextContent)config.supportsTextContent=node.textContent||false;if(config.textExtraction=="simple"){if(config.supportsTextContent){text=node.textContent;}else{if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){text=node.childNodes[0].innerHTML;}else{text=node.innerHTML;}}}else{if(typeof(config.textExtraction)=="function"){text=config.textExtraction(node);}else{text=$(node).text();}}return text;}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){var pos=n[i][checkCell];rows.push(r[pos]);if(!table.config.appender){var l=r[pos].length;for(var j=0;j<l;j++){tableBody[0].appendChild(r[pos][j]);}}}if(table.config.appender){table.config.appender(table,rows);}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime);}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd");},0);};function buildHeaders(table){if(table.config.debug){var time=new Date();}var meta=($.metadata)?true:false;var header_index=computeTableHeaderCellIndexes(table);$tableHeaders=$(table.config.selectorHeaders,table).each(function(index){this.column=header_index[this.parentNode.rowIndex+"-"+this.cellIndex];this.order=formatSortingOrder(table.config.sortInitialOrder);this.count=this.order;if(checkHeaderMetadata(this)||checkHeaderOptions(table,index))this.sortDisabled=true;if(checkHeaderOptionsSortingLocked(table,index))this.order=this.lockedOrder=checkHeaderOptionsSortingLocked(table,index);if(!this.sortDisabled){var $th=$(this).addClass(table.config.cssHeader);if(table.config.onRenderHeader)table.config.onRenderHeader.apply($th);}table.config.headerList[index]=this;});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders);}return $tableHeaders;};function computeTableHeaderCellIndexes(t){var matrix=[];var lookup={};var thead=t.getElementsByTagName('THEAD')[0];var trs=thead.getElementsByTagName('TR');for(var i=0;i<trs.length;i++){var cells=trs[i].cells;for(var j=0;j<cells.length;j++){var c=cells[j];var rowIndex=c.parentNode.rowIndex;var cellId=rowIndex+"-"+c.cellIndex;var rowSpan=c.rowSpan||1;var colSpan=c.colSpan||1
var firstAvailCol;if(typeof(matrix[rowIndex])=="undefined"){matrix[rowIndex]=[];}for(var k=0;k<matrix[rowIndex].length+1;k++){if(typeof(matrix[rowIndex][k])=="undefined"){firstAvailCol=k;break;}}lookup[cellId]=firstAvailCol;for(var k=rowIndex;k<rowIndex+rowSpan;k++){if(typeof(matrix[k])=="undefined"){matrix[k]=[];}var matrixrow=matrix[k];for(var l=firstAvailCol;l<firstAvailCol+colSpan;l++){matrixrow[l]="x";}}}}return lookup;}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++));}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell);}}}return arr;};function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true;};return false;}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true;};return false;}function checkHeaderOptionsSortingLocked(table,i){if((table.config.headers[i])&&(table.config.headers[i].lockedOrder))return table.config.headers[i].lockedOrder;return false;}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table);}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i];}}};function formatSortingOrder(v){if(typeof(v)!="Number"){return(v.toLowerCase()=="desc")?1:0;}else{return(v==1)?1:0;}}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true;}}return false;}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this);}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]]);}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$('<colgroup>');$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($('<col>').css('width',$(this).width()));});$(table).prepend(colgroup);};}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++;}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date();}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(table.config.parsers[c].type=="text")?((order==0)?makeSortFunction("text","asc",c):makeSortFunction("text","desc",c)):((order==0)?makeSortFunction("numeric","asc",c):makeSortFunction("numeric","desc",c));var e="e"+i;dynamicExp+="var "+e+" = "+s;dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { ";}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; ";}dynamicExp+="return 0; ";dynamicExp+="}; ";if(table.config.debug){benchmark("Evaling expression:"+dynamicExp,new Date());}eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime);}return cache;};function makeSortFunction(type,direction,index){var a="a["+index+"]",b="b["+index+"]";if(type=='text'&&direction=='asc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+a+" < "+b+") ? -1 : 1 )));";}else if(type=='text'&&direction=='desc'){return"("+a+" == "+b+" ? 0 : ("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : ("+b+" < "+a+") ? -1 : 1 )));";}else if(type=='numeric'&&direction=='asc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+a+" - "+b+"));";}else if(type=='numeric'&&direction=='desc'){return"("+a+" === null && "+b+" === null) ? 0 :("+a+" === null ? Number.POSITIVE_INFINITY : ("+b+" === null ? Number.NEGATIVE_INFINITY : "+b+" - "+a+"));";}};function makeSortText(i){return"((a["+i+"] < b["+i+"]) ? -1 : ((a["+i+"] > b["+i+"]) ? 1 : 0));";};function makeSortTextDesc(i){return"((b["+i+"] < a["+i+"]) ? -1 : ((b["+i+"] > a["+i+"]) ? 1 : 0));";};function makeSortNumeric(i){return"a["+i+"]-b["+i+"];";};function makeSortNumericDesc(i){return"b["+i+"]-a["+i+"];";};function sortText(a,b){if(table.config.sortLocaleCompare)return a.localeCompare(b);return((a<b)?-1:((a>b)?1:0));};function sortTextDesc(a,b){if(table.config.sortLocaleCompare)return b.localeCompare(a);return((b<a)?-1:((b>a)?1:0));};function sortNumeric(a,b){return a-b;};function sortNumericDesc(a,b){return b-a;};function getCachedSortType(parsers,i){return parsers[i].type;};this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies)return;var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$.data(this,"tablesorter",config);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){$this.trigger("sortStart");var $cell=$(this);var i=this.column;this.order=this.count++%2;if(this.lockedOrder)this.order=this.lockedOrder;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j]);}}}config.sortList.push([i,this.order]);}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2;}}}else{config.sortList.push([i,this.order]);}};setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache));},1);return false;}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false;}});$this.bind("update",function(){var me=this;setTimeout(function(){me.config.parsers=buildParserCache(me,$headers);cache=buildCache(me);},1);}).bind("updateCell",function(e,cell){var config=this.config;var pos=[(cell.parentNode.rowIndex-1),cell.cellIndex];cache.normalized[pos[0]][pos[1]]=config.parsers[pos[1]].format(getElementText(config,cell),cell);}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache));}).bind("appendCache",function(){appendToTable(this,cache);}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this);}).bind("applyWidgets",function(){applyWidget(this);});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist;}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList]);}applyWidget(this);});};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false;}}if(a){parsers.push(parser);};};this.addWidget=function(widget){widgets.push(widget);};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i;};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i;};this.isDigit=function(s,config){return/^[-+]?\d*$/.test($.trim(s.replace(/[,.']/g,'')));};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild)this.removeChild(this.firstChild);}empty.apply(table.tBodies[0]);}else{table.tBodies[0].innerHTML="";}};}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true;},format:function(s){return $.trim(s.toLocaleLowerCase());},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c);},format:function(s){return $.tablesorter.formatFloat(s);},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s);},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[£$€]/g),""));},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s);},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item;}else{r+=item;}}return $.tablesorter.formatFloat(r);},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s);},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),''));},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s);},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0");},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s));},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""));},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/));},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s);},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2");}else if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");}else if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");}return $.tablesorter.formatFloat(new Date(s).getTime());},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s);},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime());},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false;},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?'sortValue':c.parserMetadataName;return $(cell).metadata()[p];},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date();}var $tr,row=-1,odd;$("tr:visible",table.tBodies[0]).each(function(i){$tr=$(this);if(!$tr.hasClass(table.config.cssChildRow))row++;odd=(row%2==0);$tr.removeClass(table.config.widgetZebra.css[odd?0:1]).addClass(table.config.widgetZebra.css[odd?1:0])});if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time);}}});})(jQuery);


var $landingpage = mytheme_urls.landingpage;
if($landingpage) {
	
	// Scroll To
	jQuery.noConflict();
	;(function($){var h=$.scrollTo=function(a,b,c){$(window).scrollTo(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jquery)>=1.3?0:1,limit:true};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return/webkit/i.test(navigator.userAgent)||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollTo=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){if(!e)return;var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ)){targ=both(targ);break}targ=$(targ,this);if(!targ.length)return;case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(g.limit&&/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jQuery);	
	
	// Jquery Nav
	jQuery.noConflict();
	!function(a,b,c,d){var e=function(d,e){this.elem=d,this.$elem=a(d),this.options=e,this.metadata=this.$elem.data("plugin-options"),this.$win=a(b),this.sections={},this.didScroll=!1,this.$doc=a(c),this.docHeight=this.$doc.height()};e.prototype={defaults:{navItems:"a",currentClass:"current",changeHash:!1,easing:"swing",filter:"",scrollSpeed:750,scrollThreshold:.5,begin:!1,end:!1,scrollChange:!1},init:function(){return this.config=a.extend({},this.defaults,this.options,this.metadata),this.$nav=this.$elem.find(this.config.navItems),""!==this.config.filter&&(this.$nav=this.$nav.filter(this.config.filter)),this.$nav.on("click.onePageNav",a.proxy(this.handleClick,this)),this.getPositions(),this.bindInterval(),this.$win.on("resize.onePageNav",a.proxy(this.getPositions,this)),this},adjustNav:function(a,b){a.$elem.find("."+a.config.currentClass).removeClass(a.config.currentClass),b.addClass(a.config.currentClass)},bindInterval:function(){var b,a=this;a.$win.on("scroll.onePageNav",function(){a.didScroll=!0}),a.t=setInterval(function(){b=a.$doc.height(),a.didScroll&&(a.didScroll=!1,a.scrollChange()),b!==a.docHeight&&(a.docHeight=b,a.getPositions())},250)},getHash:function(a){return a.attr("href").split("#")[1]},getPositions:function(){var c,d,e,b=this;b.$nav.each(function(){c=b.getHash(a(this)),e=a("#"+c),e.length&&(d=parseInt(e.offset().top,10)+200,b.sections[c]=Math.round(d))})},getSection:function(a){var b=null,c=Math.round(this.$win.height()*this.config.scrollThreshold);for(var d in this.sections)this.sections[d]-c<a&&(b=d);return b},handleClick:function(c){var d=this,e=a(c.currentTarget),f=e.parent(),g="#"+d.getHash(e);f.hasClass(d.config.currentClass)||(d.config.begin&&d.config.begin(),d.adjustNav(d,f),d.unbindInterval(),d.scrollTo(g,function(){d.config.changeHash&&(b.location.hash=g),d.bindInterval(),d.config.end&&d.config.end()})),c.preventDefault()},scrollChange:function(){var c,a=this.$win.scrollTop(),b=this.getSection(a);null!==b&&(c=this.$elem.find('a[href$="#'+b+'"]').parent(),c.hasClass(this.config.currentClass)||(this.adjustNav(this,c),this.config.scrollChange&&this.config.scrollChange(c)))},scrollTo:function(b,c){var d=a(b).offset().top;a("html, body").animate({scrollTop:d},this.config.scrollSpeed,this.config.easing,c)},unbindInterval:function(){clearInterval(this.t),this.$win.unbind("scroll.onePageNav")}},e.defaults=e.prototype.defaults,a.fn.onePageNav=function(a){return this.each(function(){new e(this,a).init()})}}(jQuery,window,document);		
}